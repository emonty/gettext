2001-07-21  Bruno Haible  <haible@clisp.cons.org>

	* msgl-cat.h: New file.
	* msgl-cat.c: New file, extracted from msgcat.c.
	* msgcat.c (more_than, less_than): Move to msgl-cat.c.
	(use_first): Likewise. Change type to bool.
	(long_options): Don't take the address of use_first.
	(main): Initialize more_than, less_than, use_first explicitly.
	Add --use-first handling.
	(is_message_selected, is_message_needed, is_message_first_needed,
	catenate_msgdomain_list): Move to msgl-cat.c.
	* read-po.h (allow_duplicates): New declaration.
	* read-po.c (allow_duplicates): New variable.
	(readall_directive_message): If allow_duplicates is true, don't search
	for the message ID, just append the message.
	* msguniq.c: New file.
	* Makefile.am (bin_PROGRAMS): Add msguniq.
	(noinst_HEADERS): Add msgl-cat.h.
	(msgcat_SOURCES): Add msgl-cat.c.
	(msguniq_SOURCES, msguniq_LDADD): New variables.

2001-07-21  Bruno Haible  <haible@clisp.cons.org>

	* msgcat.c (usage): The default value for more-than is 0 here.
	(is_message_selected): Always keep the header entry. Needed when
	option --unique is used.

2001-07-21  Bruno Haible  <haible@clisp.cons.org>

	* message.h (struct message_ty): Add fields 'alternative_count',
	'alternative'.
	* msgcat.c (catenate_msgdomain_list): is_c_format defaults to
	undecided, not to no. If all alternative translations of a message
	are the same, keep the first translation instead of mentioning them
	all, and don't make the message fuzzy.

2001-07-21  Bruno Haible  <haible@clisp.cons.org>

	* msgcomm.c (extract_directive_message): Don't make the message fuzzy
	if the first occurrence wasn't fuzzy.

2001-07-21  Bruno Haible  <haible@clisp.cons.org>

	* message.c (message_comment_filepos): Don't keep the filepos[] array
	sorted.
	* write-po.c (cmp_by_msgid): Renamed from msgid_cmp.
	(cmp_filepos, msgdomain_list_sort_filepos): New functions.
	(cmp_by_filepos): Renamed from filepos_cmp.
	(msgdomain_list_sort_by_filepos): Call msgdomain_list_sort_filepos.

2001-07-12  Bruno Haible  <haible@clisp.cons.org>

	* msgexec.c: New file.
	* msgsed.c: Remove file.
	* Makefile.am (bin_PROGRAMS): Replace msgsed with msgexec.
	(msgexec_SOURCES, msgexec_LDADD): New variables.
	(msgsed_SOURCES, msgsed_LDADD): Remove variables.

2001-07-11  Bruno Haible  <haible@clisp.cons.org>

	* xgettext.c (test_whether_c_format): When encountering an
	unterminated % format specifier, return 'impossible'.
	Reported by Gaute B Strokkenes <gs234@cam.ac.uk>.

2001-07-09  Bruno Haible  <haible@clisp.cons.org>

	* write-po.c (has_nonascii): New function.
	(message_print): Warn if the msgid is not fully ASCII.
	(message_print_obsolete): Likewise.

2001-07-05  Bruno Haible  <haible@clisp.cons.org>

	* msgcomm.c (is_message_selected): Keep the header entry.

2001-07-01  Bruno Haible  <haible@clisp.cons.org>

	* po-charset.h (po_lex_charset): New declaration.
	* po-charset.c (po_lex_charset): Export variable.
	* po-lex.h: Include xerror.h.
	(gram_pos_column): New declaration.
	(po_gram_error): Also output current column number.
	(po_gram_error_at_line): Work around ## problem in gcc.
	* po-lex.c: Include linebreak.h and utf8-ucs4.h.
	(gram_pos_column): New variable.
	(po_gram_error): Also output current column number.
	(MBCHAR_BUF_SIZE): New macro.
	(struct mbchar, mbchar_t): New types.
	(memcpy_small, mb_iseof, mb_ptr, mb_len, mb_iseq, mb_isnul, mb_cmp,
	mb_equal, mb_isascii): New functions.
	(MB_UNPRINTABLE_WIDTH): New macro.
	(mb_width, mb_putc, mb_setascii, mb_copy): New functions.
	(NPUSHBACK): New macro.
	(struct mbfile, mbfile_t): New types.
	(signal_eilseq): New variable.
	(mbfile_init, mbfile_getc, mbfile_ungetc): New functions.
	(mbf): New variable.
	(fp): Remove variable.
	(lex_open): Initialize mbf, gram_pos_column, signal_eilseq.
	(lex_close): Reset mbf, gram_pos_column, signal_eilseq.
	(lex_getc): Return a multibyte character. Update gram_pos_column.
	(lex_ungetc): Take a multibyte character. Update gram_pos_column.
	(keyword_p): Use po_gram_error_at_line instead of po_gram_error.
	No column number needed here.
	(control_sequence): Read multibyte characters instead of bytes.
	(po_gram_lex): Likewise.
	* xgettext.c (exclude_directive_domain): Use po_gram_error_at_line
	instead of po_gram_error. No column number needed here.
	(extract_directive_domain): Likewise.
	* msgcomm.c (extract_directive_domain): Likewise.

2001-06-30  Bruno Haible  <haible@clisp.cons.org>

	* message.h: Include stdbool.h.
	(message_ty): Change type of fields 'is_fuzzy', 'obsolete' to bool.
	(message_predicate_ty): Change return type to bool.
	* message.c (message_alloc): Update.
	* msgcat.c (is_message_selected): Change return type to bool.
	(is_message_needed): Likewise.
	(is_message_first_needed): Likewise.
	(main): Use bool.
	(catenate_msgdomain_list): Update. Use yes/no for is_c_format and
	do_wrap.
	* msgcmp.c (multi_domain_mode): Change type to bool.
	(compare_directive_message): Change 'obsolete' argument type to bool.
	(main): Use bool.
	* msgcomm.c (is_message_selected): Change return type to bool.
	(extract_directive_message): Change 'obsolete' argument type to bool.
	(main): Use bool.
	(struct extract_class_ty): Change type of field 'is_fuzzy' to bool.
	Change type of field 'filepos_count' to size_t.
	(extract_constructor): Update.
	(extract_parse_brief): Update.
	(extract_comment_special): Update.
	(read_po_file): Update.
	* msgconv.c (main): Use bool.
	* msgen.c (main): Use bool.
	* msgfmt.c (struct msgfmt_class_ty): Change type of fields 'is_fuzzy',
	'has_header_entry' to bool.
	(include_all): Change type to bool.
	(do_check): Likewise.
	(long_options): Update.
	(format_directive_message): Change 'obsolete' argument type to bool.
	(main): Use bool.
	(format_constructor): Update.
	(format_debrief): Update.
	(format_comment_special): Update.
	(check_pair): Update.
	* msggrep.c (is_string_selected): Change return type to bool.
	(is_message_selected): Likewise.
	(main): Use bool.
	* msgl-charset.c (compare_po_locale_charsets): Use bool.
	* msgl-iconv.c (iconv_message_list): Update.
	* msgmerge.c (quiet): Change type to bool.
	(multi_domain_mode): Likewise.
	(main): Use bool.
	(match_domain): Update.
	(merge): Update.
	* msgsed.c (main): Use bool.
	* msgunfmt.c (main): Use bool.
	* po-gram-gen.y (string, stringlist, number, pos, rhs): Change type of
	'obsolete' field to bool.
	* po-lex.h: Include stdbool.h.
	(pass_obsolete_entries): Change type to bool.
	(po_lex_pass_comments): Change argument type to bool.
	(po_lex_pass_obsolete_entries): Likewise.
	(po_gram_error): Update.
	(po_gram_error_at_line): Update.
	* po-lex.c (po_lex_obsolete): Change type to bool.
	(pass_comments): Likewise.
	(pass_obsolete_entries): Likewise.
	(lex_open): Update.
	(lex_close): Update.
	(po_gram_error): Update.
	(po_gram_error_at_line): Update.
	(po_gram_lex): Update.
	(po_lex_pass_comments): Change argument type to bool.
	(po_lex_pass_obsolete_entries): Likewise.
	* po.h (struct po_method_ty): Change 'obsolete' argument type of
	directive_message to bool.
	(po_callback_message): Change 'obsolete' argument type to bool.
	* po.c (po_directive_message): Change 'obsolete' argument type to bool.
	(po_callback_message): Likewise.
	* read-po.c (struct readall_class_ty): Change type of field 'is_fuzzy'
	to bool.
	(readall_directive_message): Change 'obsolete' argument type to bool.
	(readall_constructor): Update.
	(readall_parse_brief): Update.
	(readall_comment_special): Update.
	(read_po_file): Update.
	* str-list.h: Include stdbool.h.
	(string_list_member): Change return type to bool.
	* str-list.c (string_list_member): Change return type to bool.
	* write-po.h (message_print_style_escape, msgdomain_list_print): Change
	argument type to bool.
	* write-po.c (make_c_format_description_string) Change argument type
	to bool.
	(message_print): Likewise.
	(message_print_obsolete): Likewise.
	(indent): Change type to bool.
	(uniforum): Likewise.
	(escape): Likewise.
	(message_print_style_indent): Update.
	(message_print_style_uniforum): Update.
	(message_print_style_escape): Change argument type to bool.
	(wrap): Update.
	(msgdomain_list_print): Change argument type to bool.
	* xget-lex.h (xgettext_any_keywords): Change return type to bool.
	* xget-lex.c (trigraphs): Change type to bool.
	(default_keywords): Likewise.
	(phase5_get): Use NULL not 0. Update.
	(phaseX_get): Use bool.
	(xgettext_lex): Update.
	(xgettext_lex_keyword): Update.
	(xgettext_any_keywords): Change return type to bool.
	(xgettext_lex_trigraphs): Update.
	* xgettext.c (add_all_comments): Change type to bool.
	(extract_all): Likewise.
	(long_options): Update.
	(exclude_directive_message): Change 'obsolete' argument type to bool.
	(extract_directive_message): Likewise.
	(main): Use bool.
	(scan_c_file): Update.
	(struct extract_class_ty): Change type of field 'is_fuzzy' to bool.
	Change type of field 'filepos_count' to size_t.
	(extract_constructor): Update.
	(extract_parse_brief): Update.
	(extract_comment_special): Update.
	(construct_header): Update.

2001-06-25  Bruno Haible  <haible@clisp.cons.org>

	* msggrep.c (usage): Explain the pattern syntax.

2001-06-18  Karl Eichwalder  <ke@suse.de>

	* msgcomm.c (long_options): Add '--unique' option as documented
	within --help output.

2001-06-12  Bruno Haible  <haible@clisp.cons.org>

	* xgettext.c (extension_to_language): Recognize "*.hh" as being C++.
	Reported by Felix Natter.

2001-06-10  Bruno Haible  <haible@clisp.cons.org>

	* msgcmp.c (main): Set gram_max_allowed_errors to UINT_MAX, as in
	msgmerge.c.

2001-06-10  Bruno Haible  <haible@clisp.cons.org>

	* message.c (message_alloc): Cast xmalloc return value.
	(message_list_alloc): Likewise.
	(message_list_list_alloc): Likewise.
	(msgdomain_alloc): Likewise.
	(msgdomain_list_alloc): Likewise.
	* msgunfmt.c (string32): Likewise.
	* po.c (po_alloc): Likewise.
	* str-list.c (string_list_concat): Likewise.
	(string_list_join): Likewise.

2001-06-10  Bruno Haible  <haible@clisp.cons.org>

	* message.h (message_ty): New field 'tmp'.
	(message_predicate_ty): New type.
	(message_list_remove_if_not): New declaration.
	* message.c (message_list_delete_nth): Comment out.
	(message_list_remove_if_not): New function.
	* msgl-charset.h: New file.
	* msgl-charset.c: New file.
	* msgl-iconv.h: New file.
	* msgl-iconv.c: New file.
	* msgcat.c: New file.
	* msgconv.c: New file.
	* msgen.c: New file.
	* msggrep.c: New file.
	* msgsed.c: New file.
	* msgcomm.c (default_domain, output_dir): Remove variables.
	(long_options): Remove --default-domain and --output-dir. Add
	--output-file.
	(main): Don't accept -a, -C, -d, -k, -l, -L, -m, -M, -p, -T, -x.
	Use output_file instead of complexly computed file_name.
	Use O(n) loop instead of O(n^2) loop for removing messages.
	(usage): Don't document --default-domain and --output-dir.
	(is_message_selected): New function.
	* Makefile.am (bin_PROGRAMS): Add msgcat, msgconv, msgen, msggrep,
	msgsed.
	(noinst_HEADERS): Add msgl-charset.h, msgl-iconv.h.
	(msgcat_SOURCES, msgconv_SOURCES, msgen_SOURCES, msggrep_SOURCES,
	msgsed_SOURCES): New variables.
	(msgcat_LDADD, msgconv_LDADD, msgen_LDADD, msggrep_LDADD,
	msgsed_LDADD): New variables.

2001-06-10  Bruno Haible  <haible@clisp.cons.org>

	* message.h (struct message_variant_ty): Remove type.
	(struct message_ty): Remove variant_count, variant fields. Add
	msgstr, msgstr_len, pos fields.
	(message_alloc): Add msgstr, msgstr_len, pp arguments.
	(message_variant_search, message_variant_append): Remove declarations.
	(msgdomain_ty): New type.
	(msgdomain_alloc, msgdomain_free): New declarations.
	(msgdomain_list_ty): New type.
	(msgdomain_list_alloc, msgdomain_list_free, msgdomain_list_append,
	msgdomain_list_append_list, msgdomain_list_sublist,
	msgdomain_list_search, msgdomain_list_search_fuzzy): New declarations.
	* message.c (message_alloc): Add msgstr, msgstr_len, pp arguments.
	(message_free): Update.
	(message_variant_search): Remove function.
	(message_variant_append): Remove function.
	(message_copy): Update.
	(message_merge): Update.
	(message_list_alloc): Use NULL, not 0.
	(message_list_search): Likewise.
	(message_list_search_fuzzy_inner): Update.
	(message_list_list_alloc): Use NULL, not 0.
	(message_list_list_search): Likewise.
	(message_list_list_free): Comment out.
	(msgdomain_alloc, msgdomain_free, msgdomain_list_alloc,
	msgdomain_list_append, msgdomain_list_sublist): New functions.
	* read-po.h (read_po_file): Change return type to
	'msgdomain_list_ty *'.
	* read-po.c (readall_class_ty): Remove field domain_list, add field
	mdlp.
	(readall_constructor): Update.
	(readall_destructor): Likewise.
	(readall_directive_message): Likewise.
	(readall_parse_debrief): Remove function.
	(readall_methods): Use NULL instead of readall_parse_debrief.
	(read_po_file): Change return type to 'msgdomain_list_ty *'.
	* write-po.h (message_list_print, message_list_sort_by_msgid,
	message_list_sort_by_filepos): Remove declarations.
	(msgdomain_list_print, msgdomain_list_sort_by_msgid,
	msgdomain_list_sort_by_filepos): New declarations.
	* write-po.c (message_print): Remove domain argument. Update. Assume
	'first' is true.
	(message_print_obsolete): Likewise.
	(msgdomain_list_print): Renamed from message_list_print. Change type
	of first argument.
	(msgdomain_list_sort_by_msgid): Renamed from
	message_list_sort_by_msgid. Change type of argument.
	(msgdomain_list_sort_by_filepos): Renamed from
	message_list_sort_by_filepos. Change type of argument.
	* msgcmp.c (compare_class_ty): Remove field domain_list, add field
	mdlp.
	(multi_domain_mode): New variable.
	(long_options): Add --multi-domain.
	(main): Accept -m/--multi-domain.
	(usage): Explain --multi-domain.
	(match_domain): New function, extracted from 'compare'.
	(compare): Update. Handle multi_domain_mode. Change argument types to
	'const char *'.
	(compare_constructor): Update.
	(compare_destructor): Likewise.
	(compare_directive_message): Likewise.
	(compare_parse_debrief): Remove function.
	(compare_methods): Use NULL instead of compare_parse_debrief.
	(grammar): Change argument type to 'const char *' and return type to
	'msgdomain_list_ty *'.
	* msgcomm.c (main): Update.
	(extract_directive_message): Update.
	* msgmerge.c (multi_domain_mode): New variable.
	(long_options): Add --multi-domain.
	(struct statistics): New type.
	(main): Accept -m/--multi-domain. Update.
	(usage): Explain --multi-domain.
	(compendium): Update.
	(match_domain): New function, extracted from 'merge'.
	(merge): Update. Handle multi_domain_mode.
	* msgunfmt.c (main): Update.
	(read_mo_file): Update.
	* xgettext.c (main): Update.
	(exclude_directive_message): Update.
	(remember_a_message): Likewise.
	(remember_a_message_plural): Likewise.
	(scan_c_file): Change argument type to 'msgdomain_list_ty *'.
	(extract_directive_message): Update.
	(read_po_file): Change argument type to 'msgdomain_list_ty *'.
	(construct_header): Update.

	* dir-list.h: Don't use reserved identifiers in prototypes.
	* gettext.c: Likewise.
	* message.c: Likewise.
	* msgcmp.c: Likewise.
	* msgcomm.c: Likewise.
	* msgfmt.c: Likewise.
	* msgunfmt.c: Likewise.
	* ngettext.c: Likewise.
	* open-po.h: Likewise.
	* po-hash.h: Likewise.
	* po-lex.h: Likewise.
	* po-lex.c: Likewise.
	* po.h: Likewise.
	* po.c: Likewise.
	* str-list.h: Likewise.
	* write-po.c: Likewise.
	* xget-lex.h: Likewise.
	* xget-lex.c: Likewise.
	* xgettext.c: Likewise.

2001-06-10  Bruno Haible  <haible@clisp.cons.org>

	* message.h (message_list_prepend): New declaration.
	* message.c (message_list_prepend): New function.
	* msgmerge.c (merge): Add a header entry to the ref list if it has
	none.

2001-06-10  Bruno Haible  <haible@clisp.cons.org>

	* msgfmt.c: Change the --strict option to not apply to domain
	directives, only to the output filename argument.
	(struct msg_domain): Add file_name field.
	(domain_list): Renamed from domain.
	(new_domain): Add file_name argument.
	(main): Pass file name to new_domain(). Use file_name passed to
	new_domain() in fopen call; don't free it.
	(new_domain): New argument 'file_name'.
	(format_directive_domain): Always ensure ".mo" suffix, independently
	of --strict.
	(format_directive_message): Likewise.
	(add_mo_suffix): Don't call xstrdup.

2001-06-01  Bruno Haible  <haible@clisp.cons.org>

	* Makefile.am (datadir): Remove definition.
	Reported by Albert Chin-A-Young <china@thewrittenword.com>.

2001-05-15  Bruno Haible  <haible@clisp.cons.org>

	* msgcmp.c (main): Call set_program_name instead of assigning
	program_name directly.
	* msgcomm.c (main): Likewise.
	* msgfmt.c (main): Likewise.
	* msgmerge.c (main): Likewise.
	* msgunfmt.c (main): Likewise.
	* xgettext.c (main): Likewise.
	* gettext.c (main): Remove "lt-" prefix from program_name.
	* ngettext.c (main): Likewise.

2001-05-04  Bruno Haible  <haible@clisp.cons.org>

	* gettext.c (usage): Add description of what the program does.
	Separate blocks with blank lines.
	* ngettext.c (usage): Likewise.

	* msgcmp.c (usage): Add a blank line after the first usage line.
	Hardwire the blank line output.
	* msgcomm.c (usage): Likewise.
	* msgfmt.c (usage): Likewise.
	* msgmerge.c (usage): Likewise.
	* msgunfmt.c (usage): Likewise.
	* xgettext.c (usage): Likewise.

2001-05-05  Karl Eichwalder  <ke@suse.de>

	* xgettext.c (read_name_from_file): Remove trailing space from line.
	* msgcomm.c (read_name_from_file): Likewise.

2001-05-02  Bruno Haible  <haible@clisp.cons.org>

	* po-charset.c: Don't include stdio.h, stdlib.h, mbswidth.h. Include
	xerror.h instead.
	(multiline_warning): Move to xerror.c.
	(po_lex_charset_set): Use xasprintf instead of asprintf.
	* msgfmt.c: Include xerror.h.
	(format_debrief): Use multiline_error for the error message.

2001-05-01  Bruno Haible  <haible@clisp.cons.org>

	Prefix most error messages with the program name, except those
	starting with "filename:lineno:".
	* po-lex.h: Include progname.h.
	(po_gram_error): Set error_with_progname = 0 during error_at_line()
	call.
	(po_gram_error_at_line): Likewise.
	* po-lex.c (po_gram_error): Likewise.
	(po_gram_error_at_line): Likewise.
	* msgcmp.c: Include progname.h.
	(program_name): Remove variable.
	(error_print): Remove function.
	(main): Initialize error_print_progname with maybe_print_progname.
	* msgcomm.c: Include progname.h.
	(program_name): Remove variable.
	(error_print): Remove function.
	(main): Initialize error_print_progname with maybe_print_progname.
	* msgfmt.c: Include progname.h.
	(program_name): Remove variable.
	(error_print): Remove function.
	(main): Initialize error_print_progname with maybe_print_progname.
	(format_directive_message): Set error_with_progname = 0 during
	error_at_line() call.
	(check_pair): Likewise.
	* msgmerge.c: Include progname.h.
	(program_name): Remove variable.
	(error_print): Remove function.
	(main): Initialize error_print_progname with maybe_print_progname.
	* msgunfmt.c: Include progname.h.
	(program_name): Remove variable.
	(error_print): Remove function.
	(main): Initialize error_print_progname with maybe_print_progname.
	* xget-lex.c: Include progname.h.
	(phase5_get): Set error_with_progname = 0 during error() call.
	* xgettext.c: Include progname.h.
	(program_name): Remove variable.
	(error_print): Remove function.
	(main): Initialize error_print_progname with maybe_print_progname.
	(scan_c_file): Set error_with_progname = 0 during error() call.

2001-04-30  Bruno Haible  <haible@clisp.cons.org>

	Save the messages' obsoleteness status in the 'message_ty'.
	* po.h (struct po_method_ty): Add 'obsolete' argument to
	directive_message method.
	(po_callback_message): Add 'obsolete' argument.
	* po.c (po_directive_message): Add 'obsolete' argument. Pass it to
	method->directive_message.
	(po_callback_message): Add 'obsolete' argument.
	* po-gram-gen.y (message): Pass 'obsolete' argument to
	po_callback_message.
	* msgcmp.c (compare_directive_message): Add 'obsolete' argument.
	* msgcomm.c (extract_directive_message): Likewise.
	* msgfmt.c (format_directive_message): Likewise.
	* xgettext.c (exclude_directive_message, extract_directive_message):
	Likewise.
	* read-po.c (readall_directive_message): Likewise. Set mp->obsolete.

2001-05-01  Bruno Haible  <haible@clisp.cons.org>

	Reduce running time for very long msgstrs from O(n^2) to O(n) where
	n is the number of string pieces.
	* str-list.h (string_list_init, string_list_destroy,
	string_list_concat, string_list_concat_destroy): New declarations.
	* str-list.c (string_list_init, string_list_destroy,
	string_list_concat, string_list_concat_destroy): New functions.
	* po-gram-gen.y Include str-list.h.
	(%union): Add new alternative of type string_list_ty.
	(string_list): Change type to stringlist.
	(message): Use string_list_concat_destroy to convert a stringlist to
	a single string. Use string_list_destroy instead of free.
	(msgid_pluralform): Likewise.
	(pluralform): Likewise.
	(string_list): Return a stringlist. Don't concatenate the strings one
	by one.
	* po-lex.c: Include str-list.h.

2001-04-30  Bruno Haible  <haible@clisp.cons.org>

	* message.h (message_alloc): Add const to prototype.
	* message.c (message_alloc): Add const to argument type.
	* msgcmp.c (compare_class_ty): Add const to 'domain' field.
	* msgcomm.c (default_domain): Add const.
	(main): Add const to 'file_name' variable.
	* xgettext.c (default_domain): Add const.
	(msgstr_prefix): Likewise.
	(msgstr_suffix): Likewise.
	(main): Add const to 'file_name' variable.

2001-04-29  Bruno Haible  <haible@clisp.cons.org>

	* read-po.h: New file.
	* read-po.c: New file, extracted from msgmerge.c.
	* msgmerge.c: Don't include string.h. Include read-po.h instead.
	(merge_class_ty, line_comment, merge_constructor, merge_destructor,
	merge_directive_domain, merge_directive_message, merge_parse_brief,
	merge_parse_debrief, merge_comment, merge_comment_dot,
	merge_comment_special, merge_comment_filepos, grammar): Move out to
	read-po.c.
	(compendium, merge): Call read_po_file() instead of grammar().
	* Makefile.am (noinst_HEADERS): Add read-po.h.
	(msgmerge_SOURCES): Add read-po.c.
	* FILES: Update.

2001-04-28  Bruno Haible  <haible@clisp.cons.org>

	* msgcmp.c (usage): Restructure usage message. Talk about ref.pot, not
	ref.po.
	* msgcomm.c (long_options): Remove --add-comments, --join-existing
	options.
	(main): Rename local variables sort_output, sort_by_file to
	sort_by_msgid, sort_by_filepos. Remove -c and -j options.
	(usage): Restructure usage message. INPUTFILE is not mandatory. Remove
	--trigraphs option.
	* msgfmt.c (usage): Restructure usage message.
	* msgmerge.c (main): Signal error if both --sort-output and
	--sort-by-file were given.
	(usage): Restructure usage message. Talk about ref.pot, not ref.po.
	Document --sort-output, --sort-by-file, --quiet.
	* msgunfmt.c (long_options): Add --sort-output.
	(main): Recognize -s/--sort-output option, and sort the message list
	when it is given.
	(usage): Restructure usage message.
	* xgettext.c (main): Rename local variables sort_output, sort_by_file
	to sort_by_msgid, sort_by_filepos.
	(usage): Restructure usage message.

2001-04-28  Bruno Haible  <haible@clisp.cons.org>

	* po-charset.h: New file.
	* po-charset.c: New file, extracted from po.c. Don't warn about wrong
	or missing charset if it's a POT file.
	* po-lex.h (iconv.h, po_lex_iconv): Move to po-charset.h.
	(po_lex_charset): Remove declaration.
	* po-lex.c: Include po-charset.h.
	(po_lex_charset, po_lex_iconv): Move to po-charset.c.
	(lex_open): Call po_lex_charset_init.
	(lex_close): Call po_lex_charset_close.
	* po.c: Don't include ctype.h, stdio.h, mbswidth.h, libgettext.h.
	Include po-charset.h instead.
	(program_name, _, SIZEOF, multiline_warning): Move to po-charset.c.
	(po_callback_message): Move charset handling to po-charset.c.
	* Makefile.am (noinst_HEADERS): Add po-charset.h.
	(msgcmp_SOURCES, msgfmt_SOURCES, msgmerge_SOURCES, xgettext_SOURCES,
	msgcomm_SOURCES): Add po-charset.c.
	* FILES: Update.

	* msgfmt.c: Don't include ctype.h.
	* msgunfmt.c: Likewise.

2001-04-28  Bruno Haible  <haible@clisp.cons.org>

	* po.h (PO_BASE_TY): Remove next_is_fuzzy field.
	* po.c (po_alloc): Don't reset next_is_fuzzy.
	(po_callback_message): Ignore fuzziness of the header entry. Don't
	reset next_is_fuzzy.
	(po_callback_comment): Don't set next_is_fuzzy.
	* msgfmt.c (format_directive_message): Ignore fuzziness of the header
	entry. Count fuzzy untranslated entries as untranslated.

2001-07-24  Bruno Haible  <haible@clisp.cons.org>

	* gettext-0.10.39 released.

2001-05-23  Bruno Haible  <haible@clisp.cons.org>

	* gettext-0.10.38 released.

2001-05-23  Bruno Haible  <haible@clisp.cons.org>

	* write-po.c (wrap): Avoid broken EUC-KR conversion in glibc-2.1.

2001-05-21  Bruno Haible  <haible@clisp.cons.org>

	* xgettext.c (construct_header): Replace 8-bit with 8bit.

2001-04-19  Bruno Haible  <haible@clisp.cons.org>

	* gettext-0.10.37 released.

2001-04-18  Bruno Haible  <haible@clisp.cons.org>

	* po.c (po_callback_message): Don't call iconv_open when the
	OLD_PO_FILE_INPUT environment variable is set.
	* write-po.c (wrap): Don't call iconv_open when the OLD_PO_FILE_OUTPUT
	environment variable is set.

2001-04-09  Bruno Haible  <haible@clisp.cons.org>

	* po.c: Include mbswidth.h.
	(program_name): New declaration.
	(multiline_warning): New function.
	(po_callback_message): Change messages again. Call multiline_warning
	instead of error.

2001-04-04  Bruno Haible  <haible@clisp.cons.org>

	* gettext.c (program_name): Change type to 'const char *'.
	* ngettext.c (program_name): Likewise.

2001-04-04  Bruno Haible  <haible@clisp.cons.org>

	* write-po.c (wrap): Prohibit line breaks inside backslash escape
	sequences.

2001-03-29  Bruno Haible  <haible@clisp.cons.org>

	* gettext-0.10.36 released.

2001-03-27  Bruno Haible  <haible@clisp.cons.org>

	* po.c (po_callback_message): Change message again.

2001-03-26  Bruno Haible  <haible@clisp.cons.org>

	* xgettext.c (test_whether_c_format): Recognize '%%' as valid.
	* msgfmt.c (check_pair): In error message, count format
	specifications starting from 1, not 0.

2001-03-25  Bruno Haible  <haible@clisp.cons.org>

	* xgettext.c (warn_id_len): Remove unused variable.
	(main): Don't set it. 'l' option becomes a nop.
	(usage): Remove mention of --string-limits/-l.

2001-03-23  Bruno Haible  <haible@clisp.cons.org>

	* msgcomm.c (main): Don't give an error message if there are "too few"
	messages in the input files. Do sanity checking before reading the
	input files. Make --add-location the default, even if --omit-header
	is specified.

2001-03-22  Bruno Haible  <haible@clisp.cons.org>

	* xgettext.c (construct_header): Replace ENCODING with 8-bit.

2001-03-20  Bruno Haible  <haible@clisp.cons.org>

	* po.c (po_callback_message): Change message, refer to GNU libiconv.

2001-03-18  Bruno Haible  <haible@clisp.cons.org>

	* gettext.c [TESTS]: When testing, set HAVE_SETLOCALE.
	(main): Expand escape sequences also if no domain is given. Don't need
	to call bindtextdomain if there are no string arguments.
	* ngettext.c: New file.
	* Makefile.am (bin_PROGRAMS): Add ngettext.
	(ngettext_SOURCES): New variable.

2001-03-19  Bruno Haible  <haible@clisp.cons.org>

	* xgettext.c (extension_to_language): Recognize "*.cpp" and "*.hpp" as
	being C++.
	Patch by Dennis Bjorklund <db@zigo.dhs.org>.

2001-03-11  Bruno Haible  <haible@clisp.cons.org>

	* gettext.c: Force inclusion of libgnuintl.h. On Solaris, <locale.h>
	has already included libintl.h.

2001-03-11  Bruno Haible  <haible@clisp.cons.org>
            Karl Eichwalder  <ke@suse.de>

	* po.c (po_callback_message): Add comments to support translators.

2001-03-11  Bruno Haible  <haible@clisp.cons.org>

	* po-lex.c (lex_close): Use ngettext and plural-form message.
	* msgcmp.c (compare): Likewise.
	* msgfmt.c (main): Likewise.

2001-03-10  Bruno Haible  <haible@clisp.cons.org>

	* po.c (po_callback_message): Cast %*s argument from size_t to int.
	* msgfmt.c (format_debrief): Likewise.
	(check_pair): Cast format string argument from size_t to long.
	* msgmerge.c (merge): Likewise.

	* gettext.c (main): Update copyright year.
	* msgcmp.c (main): Likewise.
	* msgcomm.c (main): Likewise.
	* msgfmt.c (main): Likewise.
	* msgmerge.c (main): Likewise.
	* msgunfmt.c (main): Likewise.
	* xgettext.c (main): Likewise.

	* po.c (po_callback_message): Also warn if no iconv is present and
	the charset is a CJK encoding requiring iconv. Also avoid broken
	EUC-KR conversion in glibc-2.1.

2001-03-09  Bruno Haible  <haible@clisp.cons.org>

	Fix output of strings in CJK encodings.
	* write-po.c: Include iconv.h.
	(wrap): While preparing a line, use iconv to avoid treating the second
	byte of a multi-byte character as an ASCII character.

2001-03-04  Bruno Haible  <haible@clisp.cons.org>

	* msgcomm.c (main): Use IS_ABSOLUTE_PATH and concatenated_pathname.
	Fixes an incorrectly computed memory allocation.
	* xgettext.c (main): Likewise.
	* open-po.c (open_po_file): Use IS_ABSOLUTE_PATH and
	concatenated_pathname.
	* xget-lex.c (xgettext_lex_open): Likewise.
	* msgfmt.c (main): Use SET_BINARY instead of setmode.
	* msgunfmt.c (read_mo_file): Likewise.

2001-03-04  Bruno Haible  <haible@clisp.cons.org>

	Check syntax of obsolete entries of PO files, not only in msgmerge.
	* po-lex.h (pass_obsolete_entries): New declaration.
	(msgstr_def): Remove pos field.
	* po-lex.c (po_lex_obsolete): New variable.
	(pass_obsolete_entries): Make non-static.
	(lex_open): Initialize po_lex_obsolete.
	(lex_close): Reset po_lex_obsolete.
	(po_gram_lex): Don't look at pass_obsolete_entries. Instead, set
	po_lex_obsolete to 1 when "#~" is seen. Reset po_lex_obsolete when
	a newline is seen. Before returning, fill the 'pos' and 'obsolete'
	fields of any token.
	* po-gram.gen.y (check_obsolete): New macro.
	(union): Add a 'pos' and 'obsolete' field for any symbol type.
	(NAME): Assign to type <string>.
	(DOMAIN, MSGID, MSGID_PLURAL, MSGSTR, '[', ']'): Assign to type <pos>.
	(msgid, msgstr): Remove.
	(message, msgid_pluralform, pluralform_list, pluralform, string_list):
	Signal an error if the 'obsolete' field is not the same across the
	entire token sequence of the rule.
	(message): Deal with pass_obsolete_entries here.
	(msgid_pluralform, pluralform_list, pluralform, string_list): Fill the
	'pos' and 'obsolete' fields of $$.

2001-03-03  Bruno Haible  <haible@clisp.cons.org>

	Fix parsing of strings in CJK encodings.
	* po.h (PO_BASE_TY): New field next_is_fuzzy.
	* po-lex.h: Include iconv.h.
	(po_lex_charset, po_lex_iconv): New declarations.
	* po.c (SIZEOF): New macro.
	(po_alloc): Initialize next_is_fuzzy.
	(po_callback_message): Add check of charset in header entry.
	Set po_lex_charset and po_lex_iconv.
	After calling po_directive_message, reset next_is_fuzzy.
	(po_callback_comment): Set next_is_fuzzy.
	* msgfmt.c (format_directive_message): Remove check of charset in
	header entry, now done in po.c.
	* po-lex.c (po_lex_charset, po_lex_iconv): New variables.
	(lex_open): Initialize them.
	(lex_close): Reset them.
	(po_gram_lex): While parsing a string, use 'po_lex_iconv' to avoid
	treating the second byte of a multi-byte character as an ASCII
	character.
	* Makefile.am (msgcmp_LDADD, msgfmt_LDADD): New variables.

2001-03-03  Bruno Haible  <haible@clisp.cons.org>

	* write-po.h: New file, pieces of message.h.
	* message.h (message_page_width_set, message_print_style_indent,
	message_print_style_uniforum, message_print_style_escape,
	message_list_print, message_list_sort_by_msgid,
	message_list_sort_by_filepos): Move to write-po.h.
	* write-po.c: New file, pieces of message.c.
	(wrap): Add charset argument. Rewritten to use mbs_width_linebreaks().
	Use c_isprint() instead of isprint().
	(message_print): Add charset argument. Insert a space after '#' even
	if the comment line's first character is a tab.
	(message_print_obsolete): Likewise.
	(message_list_print): Don't change locales. Extract the charset name
	from the header entry.
	(msgid_cmp, filepos_cmp): Always use strcmp, never use strcoll.
	(message_list_sort_by_msgid, message_list_sort_by_filepos): Don't
	change locales.
	* message.c (indent, uniforum, escape, page_width,
	make_c_format_description_string, significant_c_format_p,
	make_c_width_description_string, message_print_style_indent,
	message_print_style_uniforum, message_print_style_escape, wrap,
	print_blank_line, message_print, message_print_obsolete,
	message_list_print, msgid_cmp, message_list_sort_by_msgid,
	filepos_cmp, message_list_sort_by_filepos, message_page_width_set):
	Move to write-po.c.
	* msgmerge.c: Include write-po.h.
	* msgunfmt.c: Likewise.
	* xgettext.c: Likewise.
	* msgcomm.c: Likewise.
	* Makefile.am (noinst_HEADERS): Add write-po.h.
	(msgmerge_SOURCES): Add write-po.c.
	(msgunfmt_SOURCES): Likewise.
	(xgettext_SOURCES): Likewise.
	(msgcomm_SOURCES): Likewise.
	(msgmerge_LDADD, msgunfmt_LDADD, xgettext_LDADD, msgcomm_LDADD): New
	variables.

2001-03-03  Bruno Haible  <haible@clisp.cons.org>

	* msgcmp.c (compare): Internationalize error message.

2001-02-10  Bruno Haible  <haible@clisp.cons.org>

	* msgunfmt.c (main): Accept -e and -E options.

2001-02-04  Bruno Haible  <haible@clisp.cons.org>

	* msgfmt.c (main): Open the output file in binary mode.
	* msgunfmt.c (read_mo_file): Open the input file in binary mode.

2001-01-21  Bruno Haible  <haible@clisp.cons.org>

	Use libtool.
	* Makefile.am (LDADD): Remove ../intl/libintl.$la, not needed any more.
	(l): Remove macro.

2001-01-20  Bruno Haible  <haible@clisp.cons.org>

	* msgcomm.c (main): Options '-<' and '->' want an argument.

2001-01-07  Bruno Haible  <haible@clisp.cons.org>

	* gettext.c: Renamed from gettextp.c. Use included libintl if TESTS
	is defined.
	* setlocale.c: Move to ../tests.
	* Makefile.am (EXTRA_PROGRAMS, all-local, CLEANFILES): Remove.
	(tstgettext_SOURCES): Remove.
	(gettext_SOURCES): Update.

2001-01-07  Bruno Haible  <haible@clisp.cons.org>

	* msgcmp.c: Include libgettext.h instead of libintl.h, so that the
	configure argument --disable-nls gets respected.
	* msgfmt.c: Likewise.
	* msgmerge.c: Likewise.
	* msgunfmt.c: Likewise.
	* open-po.c: Likewise.
	* po-gram-gen.y: Likewise.
	* po-lex.c: Likewise.
	* xgettext.c: Likewise. Don't include gettext.h.

2001-01-07  Bruno Haible  <haible@clisp.cons.org>

	Assume <stddef.h>, <stdlib.h>, <string.h>, <locale.h> exist.
	* dir-list.c: Likewise.
	* gettextp.c: Likewise.
	* message.c: Likewise.
	* msgcmp.c: Likewise.
	* msgcomm.c: Likewise.
	* msgfmt.c: Likewise.
	* msgmerge.c: Likewise.
	* msgunfmt.c: Likewise.
	* open-po.c: Likewise.
	* po.c: Likewise.
	* setlocale.c: Likewise.
	* str-list.h: Likewise.
	* xget-lex.c: Likewise.
	* xgettext.c: Likewise.

2001-01-06  Bruno Haible  <haible@clisp.cons.org>

	* Makefile.am (datadir): Assume DATADIRNAME = share.

2001-01-06  Bruno Haible  <haible@clisp.cons.org>

	* setlocale.c: New file.
	* Makefile.am (EXTRA_PROGRAMS): New variable.
	(all-local): New target.
	(CLEANFILES): New variable.
	(tstgettext_SOURCES): New variable.

2001-01-05  Bruno Haible  <haible@clisp.cons.org>

	* Makefile.am (po-gram-gen.h): Don't use $^, not supported by the
	SUSV2 "make" specification.
	(LDADD): Add @INTLLIBS@. Needed on Solaris without
	--with-included-gettext.
	* po-lex.c (gram_max_allowed_errors): Change type to
	'unsigned int'.

2001-01-01  Bruno Haible  <haible@clisp.cons.org>

	Implement plural form handling.
	* message.h (struct message_variant_ty): Add msgstr_len field.
	(struct message_ty): Add msgid_plural field.
	(message_alloc): Take additional msgid_plural argument.
	(message_variant_append): Take additional msgstr_len argument.
	* message.c (message_alloc): Take additional msgid_plural argument.
	(message_free): Free msgid_plural field.
	(message_variant_append): Take additional msgstr_len argument.
	(message_copy): Copy msgid_plural as well. Pass msgstr_len.
	(message_merge): Likewise.
	(message_print): Print plural entries using a different format.
	(message_print_obsolete): Likewise.
	* msgunfmt.c (string32): Return the string's size as well. Verify
	the string is NUL terminated.
	(read_mo_file): Split the original string into msgid and msgid_plural.
	Pass msgstr_len.
	* po-lex.h (msgstr_def): New definition, taken from msgfmt.c.
	* po-lex.c (keyword_p): Recognize the msgid_plural keyword.
	(po_gram_lex): Accept brackets as single-character tokens.
	* po.h (struct po_method_ty): Method 'directive_message' takes
	additional arguments 'msgid_plural', 'msgstr_len'.
	(po_callback_message): Additional arguments 'msgid_plural',
	'msgstr_len'.
	* po-hash-gen.y (yyerror): Effectively rename to po_hash_error.
	* po-gram-gen.y (yyerror): Effectively rename to po_gram_error,
	thus enabling reporting of syntax errors.
	(plural_counter): New variable.
	(%token): Add MSGID_PLURAL, '[', ']' as new tokens.
	(%union): Add new alternative of type 'struct msgstr_def'.
	(msgid_pluralform, pluralform, pluralform_list): New productions.
	(message): Add plural rules.
	* po.c (po_directive_message): Additional arguments 'msgid_plural',
	'msgstr_len'.
	(po_callback_message): Likewise.
	* msgfmt.c (SIZEOF): New macro.
	(struct id_str_pair): Add id_len, id_plural, id_plural_len, str_len
	fields.
	(struct hashtable_entry): Renamed from struct msgstr_def. Add
	'msgid_plural', 'msgstr_len' fields.
	(format_directive_message): Additional arguments 'msgid_plural',
	'msgstr_len'. Verify the validity of the charset field in the header.
	Compare msgstr using memcmp, not strcmp.
	(check_pair): Additional arguments 'msgid_plural', 'msgstr_len'.
	Apply the tests to msgid_plural and each msgstr[i] string.
	(format_debrief): Change error message.
	(write_table): Store msgid_plural and msgstr_len in msg_arr[], then
	output the strings including embedded NULs.
	* msgcmp.c (compare_directive_message): Additional arguments
	'msgid_plural', 'msgstr_len'.
	* msgcomm.c (extract_directive_message): Additional arguments
	'msgid_plural', 'msgstr_len'.
	* msgmerge.c (merge_directive_message): Additional arguments
	'msgid_plural', 'msgstr_len'.
	* xget-lex.h (struct xgettext_token_ty): Replace argnum field with
	argnum1, argnum2.
	* xget-lex.c (xgettext_lex): Add to default keywords: "ngettext:1,2",
	"dngettext:2,3", "dcngettext:2,3".
	(xgettext_lex_keyword): Accept new syntax "id:argnum1,argnum2".
	* xgettext.c (exclude_directive_message): Additional arguments
	'msgid_plural', 'msgstr_len'.
	(remember_a_message): Return the new message.
	(remember_a_message_plural): New function.
	(scan_c_file): Extend state machine to allow remembering msgid1 and
	msgid2 later.
	(extract_directive_message): Additional arguments 'msgid_plural',
	'msgstr_len'. Compare msgstr using memcmp, not strcmp.
	(construct_header): Update.

2000-12-31  Bruno Haible  <haible@clisp.cons.org>

	* msgfmt.c (format_directive_message): Pass to insert_entry and
	find_entry the length including the terminating NUL.
	* xget-lex.c (xgettext_lex, xgettext_lex_keyword): Likewise.

2000-12-31  Bruno Haible  <haible@clisp.cons.org>

	* msgunfmt.c (read_mo_file): Recognize "/dev/stdin", not "/dev/stdout".

2000-12-31  Bruno Haible  <haible@clisp.cons.org>

	* str-list.h: Fix typo. Add comments.
	* str-list.c: Add comments.

	* dir-list.h: Add comments.
	* dir-list.c: Likewise.

	* domain.h: Remove file.
	* msgfmt.c: Incorporate it here. Don't include "domain.h".
	* msgunfmt.c: Don't include "domain.h".
	* xgettext.c: Likewise.
	* Makefile.am (noinst_HEADERS): Remove domain.h.

	* open-po.h: New file.
	* open-po.c: Include it.
	* po-lex.c: Likewise.
	* Makefile.am (noinst_HEADERS): Add open-po.h.

	* open-po.c (open_po_file): Merge duplicated code.

	* po-lex.h: Add comments.
	(gram_max_allowed_errors): Change type to 'unsigned int'.
	(po_gram_error_at_line): Renamed from gram_error_at_line.
	(po_gram_error, po_gram_error_at_line): Use ISO C 99 macro vararg
	syntax if possible.
	* po-lex.c: Add comments. Don't include "po-gram.h".
	(po_gram_error_at_line): Renamed from gram_error_at_line.
	* msgmerge.c (main): Initialize gram_max_allowed_errors to UINT_MAX.

	* message.h: Add comments.
	(enum is_wrap): New type.
	(parse_c_width_description_string): Change return type.
	(message_ty): Change type of do_wrap field.
	* message.c (wrap): Change type of do_wrap argument.
	* msgfmt.c (msgfmt_class_ty): Change type of do_wrap field.
	* msgmerge.c (merge_class_ty): Change type of do_wrap field.
	* msgcomm.c (extract_class_ty): Change types of is_c_format, do_wrap
	fields.
	* xgettext.c (extract_class_ty): Likewise.
	(remember_a_message): Change type of do_wrap.

	* pos.h: New file.
	* po-lex.h: Include it.
	(struct lex_pos_ty): Remove type, now in pos.h.
	* message,h: Include pos.h instead of po-lex.h.
	* Makefile.am (noinst_HEADERS): Add pos.h.

	* po.h: Add comments.

	* gettextp.c (main): Use bindtextdomain instead of bindtextdomain__,
	and dgettext instead of dgettext__. There is no need to use the
	included libintl when GNU gettext or an X/Open gettext or a catgets
	has been found in the system's C library.

	* ylwrap: Update from automake-1.4.

	* FILES: New file.
	* Makefile.am (EXTRA_DIST): New variable.

2000-12-30  Bruno Haible  <haible@clisp.cons.org>

	* xgettext.c (scanner_c, scanner_cxx): Remove declarations.

2000-12-30  Bruno Haible  <haible@clisp.cons.org>

	* msgfmt.c (write_table): Pass additional argument &id_len to
	iterate_table.

2000-09-13  Bruno Haible  <haible@clisp.cons.org>

	Look into #define bodies.
	* xget-lex.c (phaseX_get): Simplify.
	(phase6_get): Stop the loop when recognizing a #define directive.
	Based on a patch by Martin v. Löwis.

	Accept ISO C 99 comment syntax.
	* xget-lex.c (cplusplus_comments: Remove variable.
	(phase4_getc): Always recognize // comments.
	(xgettext_lex_cplusplus): Remove function.
	* xget-lex.h (xgettext_lex_cplusplus): Remove declaration.
	* xgettext.c (scan_c_file): Remove is_cpp_file argument.
	(scanner_c, scanner_cxx): Remove functions.
	(language_to_scanner): Call scan_c_file directly.

2000-08-23  Bruno Haible  <haible@clisp.cons.org>

	* po-lex.c (ALERT_CHAR): New constant macro.
	(control_sequence): Accept \a. Don't accept \X.

2000-08-23  Ulrich Drepper  <drepper@redhat.com>

	* po-lex.c (control_sequence): Unget character which ended \x..
	sequence.

2000-07-28  Bruno Haible  <haible@clisp.cons.org>

	* xget-lex.h (enum xgettext_token_type_ty): Rename
	xgettext_token_type_lp/rp to xgettext_token_type_lparen/rparen.
	* xget-lex.c (enum token_type_ty): Rename token_type_lp/rp to
	token_type_lparen/rparen.
	(xgettext_any_keywords): `keywords' is now a hash table.
	* xgettext.c (construct_header): Change two printf directives %02d
	to %02ld.

1998-07-17  Paul Eggert  <eggert@twinsun.com>

	Add support for user-specified argument numbers for keywords.
	Extract all strings from a keyword arg, not just the first one.
	Handle parenthesized commas inside keyword args correctly.
	Warn about nested keywords.

	* xgettext.c (scan_c_file):
	Warn about nested keywords, e.g. _(_("xxx")).
	Warn also about not-yet-implemented but allowed nesting, e.g.
	dcgettext(..._("xxx")..., "yyy").
	Get all strings in a keyword arg, not just the first one.
	Handle parenthesized commas inside keyword args correctly.

	* xget-lex.h (enum xgettext_token_type_ty):
	Replace xgettext_token_type_keyword1 and
	xgettext_token_type_keyword2 with just plain
	xgettext_token_type_keyword; it now has argnum value.
	Add xgettext_token_type_rp.
	(struct xgettext_token_ty): Add argnum member.
	line_number and file_name are now also set for
	xgettext_token_type_keyword.
	(xgettext_lex_keyword): Arg is const char *.

	* xget-lex.c: Include "hash.h".
	(enum token_type_ty): Add token_type_rp.
	(keywords): Now a hash table.
	(phase5_get): Return token_type_rp for ')'.
	(xgettext_lex, xgettext_lex_keyword): Add support for keyword argnums.
	(xgettext_lex): Return xgettext_token_type_rp for ')'.
	Report keyword argnum, line number, and file name back to caller.

2000-05-06  Ulrich Drepper  <drepper@redhat.com>

	* Makefile.am (EXTRA_DIST): Replace po-gram.gen.h and po-hash.gen.h
	with po-gram-gen.h and po-hash-gen.h.
	(YACC): Define as @YACC@ -d.
	(YFLAGS): Removed.
	(msgcmp_SOURCES): Replace dependencies on po-gram.gen.c and
	po-hash.gen.c with po-gram-gen.y and po-hash-gen.y.
	(msgmerge_SOURCES): Likewise.
	(xgettext_SOURCES): Likewise.
	(msgcomm_SOURCES): Likewise.
	Add rule to built po-gram-gen2.h and make po-lex.o depend on it.
	Remove rules to generate po-gram.gen.c and po-hash.gen.c.
	Patches by Jim Meyering.

	* po-lex.c: Include "po-gram-gen2.h" instead of "po-gram.gen.h".

	* message.c (message_list_search_fuzzy_inner): Define static.  Take
	extra parameter with best weight so far.
	(message_list_search_fuzzy): New function.
	(message_list_list_alloc): New function.
	(message_list_list_append): New function.
	(message_list_list_append_list): New function.
	(message_list_list_search): New function.
	(message_list_list_search_fuzzy): New function.
	(message_list_list_free): New function.
	* message.h (message_list_list_ty): Define type.
	(message_list_list_alloc): Add prototype.
	(message_list_list_free): Likewise.
	(message_list_list_append): Likewise.
	(message_list_list_append_list): Likewise.
	(message_list_list_search): Likewise.
	(message_list_list_search_fuzzy): Likewise.
	* msgmerge.c: Implement --compendium/-C option.
	* xget-lex.c (xgettext_any_keywords): New function.
	* xget-lex.h (xgettext_any_keywords): Add prototype.
	* xgettext.c: Use xgettext_any_keywords to see whether keywords are
	defined.
	Patches by Peter Miller.

1998-05-15  Ulrich Drepper  <drepper@cygnus.com>

	* po-lex.c (control_sequence): Replace illegal with invalid.

1998-05-01 08:47  Ulrich Drepper  <drepper@cygnus.com>

	* gettext-0.10.35 released.

1998-04-30  Ulrich Drepper  <drepper@cygnus.com>

	* dir-list.c: Update Peter Miller's mail address.
	* dir-list.h: Likewise.
	* message.c: Likewise.
	* message.h: Likewise.
	* msgcmp.c: Likewise.
	* msgcomm.c: Likewise.
	* msgmerge.c: Likewise.
	* po-gram.h: Likewise.
	* po-gram.y: Likewise.
	* po-hash.h: Likewise.
	* po-hash.y: Likewise.
	* po-lex.c: Likewise.
	* po-lex.h: Likewise.
	* po.c: Likewise.
	* po.h: Likewise.
	* str-list.c: Likewise.
	* str-list.h: Likewise.
	* xget-lex.c: Likewise.
	* xget-lex.h: Likewise.

1998-04-30  Ulrich Drepper  <drepper@cygnus.com>

	* msgfmt.c: Fix typo in --help text.
	Reported by Jan.Djarv@mbox200.swipnet.se.

1998-04-03 01:18 1998  Philippe De Muyter  <phdm@macqel.be>

	* str-list.h (stddef.h): Include that file only if STDC_HEADERS.
	Otherwise include sys/types.h and stdio.h.
	* msgmerge.c (string.h): Include that file if HAVE_STRING_H, not
	if STDC_HEADERS.

1998-04-29  Ulrich Drepper  <drepper@cygnus.com>

	* message.c: Use unsigned char for various local variables.
	* xgettext.c (comment_tag): Define as unsigned char *.
	For loosing Solaris systems.  Patches by Jim Meyering.

	* msgfmt.c: Use extra braces in if to shut up gcc.
	* po-lex.h: Don't declare function po_gram_error and
	gram_error_at_line if macros with the same names are defined.
	* Makefile.am (MAINTAINERCLEANFILES): New variable.
	Patches by Jim Meyering.

1998-04-27  Ulrich Drepper  <drepper@cygnus.com>

	* xgettext.c: Update year and bug report address.  Add little
	explanation in --help messages.
	* msgfmt.c: Likewise.

	* msgmerge.c: Update year and bug report address.
	* msgcomm.c: Likewise.
	* msgcmp.c: Likewise.
	* msgunfmt.c: Likewise.

1997-08-31 22:20  Ulrich Drepper  <drepper@cygnus.com>

	* msgfmt.c (format_directive_message): Count fuzzy messages as
	fuzzy, even if they are not written to the output file.

1997-08-18 13:47  Philippe De Muyter  <phdm@info.ucl.ac.be>

	* msgcomm.c (sys/types.h): File included.

1997-08-15 12:38  Ulrich Drepper  <drepper@cygnus.com>

	* xgettext.c: Include <sys/param.h> to define MIN/MAX for HP/UX.
	Patch by Kaveh R. Ghazi <ghazi@caip.rutgers.edu>.

	* msgfmt.c: Change DEFAULT_ALIGNMENT to DEFAULT_OUTPUT_ALIGNMENT
	to avoid clash with macro with same name in obstack.c.
	Reported by Akim Demaille <demaille@inf.enst.fr>.

1997-08-01 15:48  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile.am (AUTOMAKE_OPTIONS): Require version 1.2.

1997-05-07 04:21  Ulrich Drepper  <drepper@cygnus.com>

	* msgcomm.c (main): Print author in --version message.
	* msgunfmt.c: Likewise.
	* msgcmp.c: Likewise.
	* msgmerge.c: Likewise.
	* msgfmt.c: Likewise.
	* xgettext.c: Likewise.
	* gettextp.c: Likewise.

1997-05-01 02:33  Ulrich Drepper  <drepper@cygnus.com>

	* msgcmp.c (main): Update copyright.
	* msgunfmt.c (main): Likewise.
	* msgcomm.c (main): Likewise.
	* msgmerge.c (main): Likewise.
	* msgfmt.c (main): Likewise.
	* gettextp.c (main): Likewise.

	* msgcomm.c: Fix comment about default output (Jan Djarv).  Split
	help message.

1997-03-31 16:09  Ulrich Drepper  <drepper@cygnus.com>

	* msgcomm.c (usage): Use program_name as argument for print to
	print message, not stdout.
	Patch by Jan Djarv <jan.djarv@mbox200.swipnet.se>.

Mon Mar 10 06:18:58 1997  Ulrich Drepper  <drepper@cygnus.com>

	* xgettext.c: Implement generic language scanner handling.

	* xget-lex.c (phase7_getc): Better comments.
	(phase5_get): Print warnings about unterminated strings and
	character constants.

	* po-lex.c (po_gram_error): Don't count continuation lines in
	messages as errors.
	(gram_error_at_line): Likewise.
	* po-lex.h: Likewise for macro versions.

	* po-hash.y: Correct typo.

	* msgunfmt.c: Implement --force-po option.

	* msgmerge.c: Implement --force-po, --no-location, and
	--add-location options.

	* msgfmt.c (format_directive_message): If messages are duplicated
	and translations are different this is a fatal error.

	* msgcmp.c (compare_directive_message): Use correct format for
	continuation line in message.

	* message.h: Add prototype for message_list_delete_nth.

	* message.c: Add message_list_delete_nth function.

	* Makefile.am (bin_PROGRAMS): Add msgcomm.  (l): New variable.
	Set to `l' is using libtool.  (LDADD): Change for the needs of
	libtool.  (msgcomm_SOURCES): New variable.

	* msgcomm.c: New file.

Wed Dec  4 01:58:10 1996  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile.am (LDADD): Change for use of libtool.

Tue Dec  3 18:08:46 1996  Ulrich Drepper  <drepper@cygnus.com>

	* xget-lex.c (phase7_getc): Return \n when newline is seen, not
	P7_NEWLINE.

	* xgettext.c (main): Implement --foreign-user flag.

	* msgcmp.c (main): Change --version output to what is required by
	GNU standards.  (usage): Correct bug report address.
	* msgfmt.c: Likewise.
	* msgunfmt.c: Likewise.
	* msgmerge.c: Likewise.
	* xgettext.c: Likewise.
	* gettextp.c: Likewise.

Sat Sep 14 04:28:09 1996  Ulrich Drepper  <drepper@cygnus.com>

	* msgunfmt.c (usage): Put bug report address in separate string.
	* msgmerge.c (usage): Likewise.
	* msgcmp.c (usage): Likewise.
	* xgettext.c (usage): Likewise.
	* msgfmt.c (usage): Likewise.
	* gettextp.c (usage): Likewise.

Thu Sep 12 21:40:48 1996  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* msgfmt.c (check_pair): Fix error messages.

Sat Aug 31 14:05:29 1996  Ulrich Drepper  <drepper@cygnus.com>

	* msgunfmt.c (usage): Add hint about where to report bugs to.
	* msgmerge.c (usage): Likewise.
	* msgcmp.c (usage): Likewise.
	* xgettext.c (usage): Likewise.
	* msgfmt.c (usage): Likewise.
	* gettextp.c (usage): Likewise.

Sat Aug 31 04:49:38 1996  Ulrich Drepper  <drepper@cygnus.com>

	* gettextp.c: Don't include <libintl.h> since this can generate
	conflicts.

Mon Jul 15 02:21:25 1996  Ulrich Drepper  <drepper@cygnus.com>

	* msgfmt.c: Major change: msgfmt now does not write fuzzy messages
	out by default.  The option -f/--use-fuzzy must be used to
	explicitely tell to do it.

Sat Jul 13 20:23:34 1996  Ulrich Drepper  <drepper@cygnus.com>

	* xget-lex.c (phase6_get): Reset selected comments on every
	preprocessor directive.

Fri Jul 12 12:38:49 1996  Ulrich Drepper  <drepper@cygnus.com>

	* xgettext.c (main): Remove `v' from short option list.

Sat Jul  6 11:22:47 1996  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* message.c (message_merge): Add some casts to (char *) in alloca
	calls.  Make KNOWN_FIELDS array static.

Sat Jul  6 11:15:43 1996  Jim Meyering  <meyering@na-net.ornl.gov>

	* msgfmt.c (check_pair): Correct English in Message.

Fri Jul  5 17:27:11 1996  Ulrich Drepper  <drepper@cygnus.com>

	* message.c (message_merge): Terminate string for UNKNOWN fields
	in header entry.

	* message.c (message_merge): Don't print POT-Revision-Date twice.

	* msgfmt.c: Implement --statistics.
	Suggested by Santiago Vila Doncel.

	* msgfmt.c: and change message checking so that tests for leading
	and trailing \n are always performed.
	Suggested by François Pinard.

Wed Jun 19 02:42:52 1996  Ulrich Drepper  <drepper@cygnus.com>

	* message.c (message_merge): Implement sorting of header entry
	lines.

Sat Jun 15 19:46:50 1996  Ulrich Drepper  <drepper@cygnus.com>

	* msgmerge.c (usage): Correct -w option in help string (was -W).

Tue Jun 11 15:28:44 1996  Ulrich Drepper  <drepper@cygnus.com>

	* xget-lex.c, xget-lex.h (xgettext_lex_comment): Change parameter
	type to size_t.

	* po-lex.h, po-lex.c (gram_max_allowed_errors): Change type to
	size_t.

	* message.c, message.h (message_page_width_set): Change parameter
	type to size_t.

	* Makefile.am (AUTOMAKE_OPTIONS): Add variable.  Must be defined
	in all subdirs.

Mon Jun 10 02:53:52 1996  Marcus Daniels  <marcus@sysc.pdx.edu>

	* dir-list.c: Include system.h in order to get size_t and NULL.

Thu Jun  6 01:59:31 1996  Ulrich Drepper  <drepper@cygnus.com>

	* str-list.h: Include <stddef.h> to get size_t defined.
	Reported by Philippe Defert.

	* Makefile.am (LDADD): Remove `@INTLLIBS@ ../lib/libnlsut.a
	@LIBS@'.  This is not necessary anymore.

Wed Jun  5 00:00:08 1996  Ulrich Drepper  <drepper@cygnus.com>

	* xgettext.c, msgunfmt.c (usage): Correct --page-width to --width
	in usage string.

	* open-po.c (open_po_file): Implement search path for PO files.

	* xget-lex.c (xgettext_lex_open): Implement search path for PO
	files.  Patch by Peter Miller.

	* message.h (struct message_ty): Add do_wrap member.
	Add prototypes for parse_c_width_description_string and
	message_page_width_set.

	* xgettext.c: Implement --width option to specify width for which
	line wrapping is done.  Change --directory option implement search
	path instead of single directory.  Patch by Peter Miller.

	* message.c (wrap): Implement no-wrap special comment.  If given
	no wrapping is performed.

	* gettextp.c, msgcmp.c, msgfmt.c, msgmerge.c, msgunfmt.c,
	xgettext.c: Add `no-wrap' comments at usage message strings.

	* msgcmp.c: Implement --directory to specify search path for .po
	files.  Patch by Peter Miller.

Tue Jun  4 23:57:59 1996  Ulrich Drepper  <drepper@cygnus.com>

	* msgfmt.c: Implement --width option to specify width for which
        line wrapping is done.  Patch by Peter Miller.

	* msgmerge.c: Implement --width option to specify width for which
	line wrapping is done.  Implement --directory to specify search
	path for .po files.  Patch by Peter Miller.

	* msgunfmt.c: Implement --width option to specify width for which
        line wrapping is done.  Patch by Peter Miller.

Tue Jun  4 00:12:25 1996  Ulrich Drepper  <drepper@cygnus.com>

	* po-hash.y: Add new clause where in GNU style format the name is
        `file'.

	* Makefile.am (noinst_HEADERS): Add dir-list.h.
	(msgcmp_SOURCES, msgfmt_SOURCES, msgmerge_SOURCES, xgettext_SOURCES):
	Add dir-list.c

Mon Jun  3 00:43:07 1996  Ulrich Drepper  <drepper@cygnus.com>

	* message.h: Add new parameter for message_list_print.

	* msgmerge.c, msgunfmt.c (main): Add new parameter to
	message_list_print.  Set to 0 because we don't need to know about
	the reasoning.

	* xgettext.c: Implement new option --debug which determines
	whether a difference is made between c-format and
	possible-c-format.  Default is to print c-format for both cases.

	* message.c (make_c_format_description_string): Take additional
	parameter DEBUG.  If nonzero, distinguish between c-format and
	possible-c-format.

	* message.c (message_print_obsolete): Copy precious translator
	comment to output file.  Reported by Santiago Vila Doncel.

	* dir-list.c: Include file now is called dir-list.h, not
        dir_list.h.

	* message.c: Include <limits.h>.

	* Makefile.am (EXTRA_DIST): Add variable to distribute po-gram.y
        and po-hash.y.

	* Makefile.am (msgfmt_SOURCES): Fix typo: msgfmt.o -> msgfmt.c.

Sat Jun  1 04:33:48 1996  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile.in: Remove support for tupdate.  msgmerge is stable
        now.

Wed Apr 10 01:20:49 1996  Ulrich Drepper  <drepper@myware>

	* message.c (message_print_obsolete): Don't print
	c-format/no-c-format flags for obsolete entries.

	* xgettext.c (construct_header): Change DIST to ZONE in header
        entry template.

	* message.c (message_merge): Insert POT-Creation-Date field before
        PO-Revision-Date.

Tue Apr  9 17:13:34 1996  Ulrich Drepper  <drepper@myware>

	* xgettext.c (construct_header): Move POT-Creation-Date line
	before PO-Revision-Date line.

Fri Apr  5 12:07:19 1996  Ulrich Drepper  <drepper@myware>

	* msgmerge.c: Implement --quiet option to prevent dots printed as
        progress report.
	(merge): Don't print dots if `quiet'.

	* msgmerge.c (merge): Nicer statistics message.

	* message.c (message_merge): Update POT-Creation-Date field in
	header entry from contents in reference file.

	* msgfmt.c (format_directive_message): Better test for unchanged
	fields in header entry.

	* xgettext.c (difftm): Is back.
	(construct_header): Print distance to GMT in POT file time stamp.

	* xgettext.c (construct_header): Print leading comment and fuzzy
        flag.

	* message.c (message_print): Allow translator comment to fill more
        than one line.

	* xgettext.c (construct_header): Introduce POT-Creation-Date
        field.

Fri Apr  5 03:05:07 1996  Ulrich Drepper  <drepper@myware>

	* msgmerge.c (merge): Rename empty in missing.  There might be
	more empty messages which are not missed.

	* msgmerge.c (merge): Terminate `.' line if no verbose output is
        selected.

	* msgmerge.c (main): Implement -v option to increase verbosity
        level.
	(merge): Print `.' to signal ongoing work.
	Unless verbosity level > 1 don't print information about fuzzy and
	missing matches.  Instead print statistics at the end.
	Suggested by François Pinard and Santiago Vila Doncel.

Thu Apr  4 11:59:20 1996  Ulrich Drepper  <drepper@myware>

	* xgettext.c (difftm): Remove unused function.
	(construct_header): Don't fill Last-Translator field with information
	about curent user but instead constant text mentioning xgettext.

	* message.c (message_list_search_fuzzy): Initialize mp before
        using it.

	* message.c (message_print): Normalize printed messages even more.
	Don't print fuzzy flag is msgstr is empty.

	* message.c (message_list_search_fuzzy): Don't try to match
	against msgid if none if the msgstr of this message in non-empty.

Thu Apr  4 01:57:37 1996  Ulrich Drepper  <drepper@myware>

	* msgfmt.c (format_directive_message): When testing header entry
	also check whether they still contain the initial values.
	Suggested by François Pinard.

Tue Apr  2 16:19:42 1996  Ulrich Drepper  <drepper@myware>

	* xgettext.c (main): Add "warning" to message about unknown input
        file type.

	* Makefile.in (all-gettext): New goal.  Same as all.

	* xgettext.c (usage): Rearange help strings.  One of them was too
	long for some dumb catgets programs.  Reported by Marcus Daniels.

	* msgfmt.c (format_directive_message): Check for standard header
        entry fields.

	* xgettext.c (construct_header): MIME-VERSION should be written
        MIME-Version.

	* msgmerge.c (main): Don't recognize -f option anymore.  This is
        the default now.

	* msgfmt.c (format_debrief): New function.  Warn if no header
        entry is found.
	(format_directive_message): Remember if header entry is found.

Tue Apr  2 11:12:15 1996  Ulrich Drepper  <drepper@myware>

	* msgfmt.c (format_constructor): New function.  Initialize
        is_c_format field.
	(format_directive_message): Clear is_c_format field for next message
	at the end.

	* xgettext.c, po-lex.h, po-lex.c, po-gram.y, msgmerge.c, msgfmt.c,
	msgcmp.c: Use gram_error_at_line instead of gram_error_with_loc
	and error_at_line instead of error_with_loc.  Roland does not like
	my English.

Tue Apr  2 03:27:34 1996  Ulrich Drepper  <drepper@myware>

	* msgunfmt.c (main): Removed -S option.  People should think twice
	before using this and so are forced to use the long version.

Tue Apr  2 03:25:56 1996  François Pinard  <pinard@iro.umontreal.ca>

	* msgunfmt.c (usage): Remove Tab character from message.

Tue Apr  2 03:15:16 1996  Marcus Daniels  <marcus@sysc.pdx.edu>

	* message.c (significant_c_format_p): If is_c_format is `no' this
        is significant.

Tue Apr  2 03:12:24 1996  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* po.c (po_comment_filepos): Make definition static as declaration
        was before.

	* msgunfmt.c (usage): Add missing \n to help string.

Mon Apr  1 02:37:45 1996  Ulrich Drepper  <drepper@myware>

	* xgettext.c (main): When recognizing file type, default to C
	instead of regarding it as an error.  Suggested by Marcus Daniels.

	* po.c (po_callback_comment): For now recognize #! also as special
        comment.

	* msgmerge.c (merge): Remove --force option.  We now always write
	the result.  It makes no sense to reject the output because some
	messages are not matching.

	* po-lex.c (po-gram_error, gram_error_with_loc): Use
	error_message_count instead of gram_nerrors.
	(gram_nerrors): Remove definition.

	* po-lex.h (po-gram_error, gram_error_with_loc): Use
	error_message_count instead of gram_nerrors.

	* xgettext.c: Remove verbose option and variable.
	(test_whether_c_format): Don't return `possible' is string
	contains no format specifier.

Sun Mar 31 23:23:40 1996  Ulrich Drepper  <drepper@myware>

	* xget-lex.c (xgettext_lex): Fix typo.  Reported by François
        Pinard.

Thu Mar 28 19:01:22 1996  Ulrich Drepper  <drepper@myware>

	* po.c (po_callback_comment): Correct handling of special
	comments.  Give whole comment to callback function instead of
	tokenized form.

Thu Mar 28 18:37:49 1996  Ulrich Drepper  <drepper@myware>

	* xgettext.c (remember_a_message): Always look through comments
	because we have to look for c-format comments.

	* message.h, msgmerge.c, xgettext.c, message.c, msgfmt.c:
	Implement more detailed C format string handling.  Basically coded
	by Marcus Daniels.

Thu Mar 28 16:52:56 1996  Marcus Daniels  <marcus@sysc.pdx.edu>

	* Makefile.in (MSGFMT_OBJ): Add message.o.

Wed Mar 27 03:16:01 1996  Ulrich Drepper  <drepper@myware>

	* xget-lex.c (xgettext_lex): Correct implementation of comments
        grouped with messages.

Tue Mar 26 21:23:54 1996  Ulrich Drepper  <drepper@myware>

	* po.c (po_callback_comment): Remove unused variable string.
	Include <ctype.h> because isspace is used.

	* message.h (message_list_print): Undo change of Mon Mar 25
	03:34:44 1996.  Don't print trailing comment.  Remove additional
	argument.

	* message.c (message_list_print): Undo change of Mon Mar 25
	03:34:44 1996.  Don't print trailing comment.  We now have a
	correct implementation of obsolete entry handling.
	* msgmerge.c: Ditto.

	* po-lex.h: Add prototype for po_lex_pass_obsolete_entries.

	* po-lex.c (po_gram_lex): Implement handling of comments for
        obsolete entries (#~).

	* msgunfmt.c, xgettext.c (main): Undo change of Mon Mar 25
	03:34:44 1996.  Remove added argument to message_list_print again.

	* po-lex.c (po_gram_lex): Small optimization in string collection.

	* message.c (message_print_obsolete): Obsolete messages are now
	preceded by #~ on each line.

	* xgettext.c (remember_a_message): Fix bug with dereferencing
	dangling pointer.  This caused xgettext test 1 to fail.

	* xgettext.c (construct_header): Update format for file header.

	* xgettext.c (extract_directive_message): Don't report error when
	message variant exists but the value is the same.  Reported by
	Roland McGrath.

	* message.c (wrap): Only write characters in escape notation if
	explicitely wanted or if it is one of the well known escapes like
	\n.

	* msgunfmt.c (main): Adopt interface to GNU coding standard.  All
	given files on command line are input files.  Output by default is
	written to standard output and can be redirected using -o.

Mon Mar 25 04:25:42 1996  Ulrich Drepper  <drepper@myware>

	* message.c, message.h (message_list_print): Parameter filename is
        const.

	* message.c (wrap): Change line break behaviour a bit.  While it
	is reasonable to break long line containing #: comments
	immediately when reaching the the limit, this could lead to unnice
	results for the strings in msgid and msgstr.  The programmer
	usually knows why the lines are that long.

	So we break for now after reaching 2 * PAGE_WIDTH instead of
        PAGE_WIDTH.

	* message.c (message_list_print): Print blank line before trailing
        comments.

	* message.c (message_print_obsolete): Don't print anything for
	obsolete entries with empty msgstr.

Mon Mar 25 03:34:44 1996  Ulrich Drepper  <drepper@myware>

	* msgunfmt.c (main): Make program by default read from stdin and
	by default write to stdout in the appropriate argument is not
	given.  Suggested by Franc,ois Pinard.

	* msgfmt.c (format_directive_domain): Only check for correct
	format string elements is special comment contains c-format.

	* msgfmt.c: Use sizeof instead of strlen to determine length of
	constant string.

	* xgettext.c: Implement generation of c-format special comments.

	* msgunfmt.c (main): Call message_list_print with additional
        argument set to NULL.

	* xgettext.c (main): Call message_list_print with additional
        argument set to NULL;
	(extract_class_ty): We don't have field comment_special anymore, but
	instead flags fuzzy and c_format.
	(extract_constructor): Reset fields fuzzy and c_format.
	(extract_directive_message): Set flags according to special comments,
	not string list.
	(extract_comment_special): Set flags according to special comment.

	* message.h (message_ty): We don't have field comment_special
	anymore.  Instead flags fuzzy and c_format.
	(message_comment_special_append): Remove prototype.
	(message_list_print): Add new argument to prototype.

	* message.c (message_alloc): We don't have the comment_special,
        but fuzzy and c_format.
	(message_comment_special_append): Remove function.  We now have flags.
	(message_copy, message_merge): Copy fuzzy and c_format flag
	appropriately.
	(message_print, message_print_obsolete): Print special comment using
	flags, not string list.
	(message_list_print): Additional argument with trailing comments.
	Printed at the end if not NULL.

	* msgmerge.c (merge_class_ty): New fields fuzzy and c_format for
        flags;
	(trailing_comments): New global variable for list of trailing
	comments in definition file.
	(grammar): Takes an additional argument which if NULL gets the list of
	trailing comments assigned to.
	(main): Call message_list_print with additional argument of trailing
	comments.
	(merge_comment_special): Recognize fuzzy and c-format special comment.

Sun Mar 24 17:35:26 1996  Ulrich Drepper  <drepper@myware>

	* xgettext.c (usage): Option --output-suffix does not exist
        anymore.

	* msgmerge.c (usage): --strict does not have short form -S.

	* message.h (message_ty): New field `obsolete'.

	* msgmerge.c (merge): Change behaviour not not matched entries.
	Instead of giving a message write them out at the end of the
	regular output and precede each line with `# '.

	* message.c (message_list_print): Handle obsolete entries
	separately by printing them at the end and preceded by `# '.
	(message_print_obsolete): New function to print obsolete entries.

	* Makefile.in ($(PROGRAMS)): Add generated libraries as
        dependencies for programs.

	* Makefile.in (PROGRAMS): Remove msgjoin.

Sun Mar 24 01:03:32 1996  Ulrich Drepper  <drepper@myware>

	* xgettext.c (extract_comment_filepos): Only add line comment if
        requested by -n option.

	* po.c (po_callback_comment): Short by one bug in special comment
        entry copying.

	* po.c (po_callback_comment): Handle special comments.  Separate
	them into a list of comma separate entries.

	* message.c (message_print): Format of lines containing fuzzy
	comments et.al. is now `#, xxx'.

	* Makefile.in: msgjoin program is not anymore generated.

	* xgettext.c: First step to implementing general input file
	handling.  The program now recognizes the file type by the file
	name extension and uses the appropriate function.  For now two
	file types are recognized: C/C++ and PO.  Especially handling PO
	files make the msgjoin program obsolete.

Sat Mar 23 01:50:00 1996  Ulrich Drepper  <drepper@myware>

	* msgfmt.c (verbose): Rename to verbose_level.
	(main): Increment verbose_level each time -v option is given.
	(format_directive_domain): Print some of the diagnostic messages only
	if verbosity level is > 1.  Suggested by Franc,ois Pinard for a
	better interface to PO mode.

	* xgettext.c (scan_c_file): Extract all string if `extract-all'
	option is given.  Reported by Roland McGrath.

Thu Mar 14 14:55:20 1996  Ulrich Drepper  <drepper@myware>

	* msgfmt.c (format_comment_special): Be prepared that special
	comment contains more than one entry, separated by commas.

	* message.c (message_print): Special comments are now written in a
	line, separated by commas.

	* msgmerge.c (merge): Replace `INEXACT' with `fuzzy'.

Thu Mar 14 11:50:48 1996  Marcus Daniels  <marcus@sysc.pdx.edu>

	* po-hash.h (po_hash): Change __P to PARAMS in prototype.

Fri Mar  1 13:35:01 1996  Ulrich Drepper  <drepper@myware>

	* msgfmt.c (main): Set error_one_per_line to 1 to prevent more
	than one error message per line.  Suggested by Franc,ois Pinard.

	* po-lex.h (po_gram_error): Don't write source file name in fatal
        message.
	(po_gram_error_with_loc): Ditto.

	* po-lex.c (lex_close): Don't write source file name in fatal
        message.
	(po_gram_error): Ditto.
	(po_gram_error_with_loc): Ditto.

Fri Mar  1 00:30:49 1996  Ulrich Drepper  <drepper@myware>

	* po-lex.h: Use PARAMS instead of __P in header declarations.

	* msgcmp.c (compare_methods): Set new field comment_special to
        NULL.

	* msgjoin.c (join_methods): Set new field comment_special to NULL.

	* xgettext.c (exclude_methods): Set new field comment_special to
        NULL.

	* po.h (struct po_method_ty): New field comment_special.
	(po_directive_domain, po_directive_message, po_parse_brief,
	po_parse_debrief, po_comment, po_comment_dot, po_comment_filepos):
	Remove prototypes.  Now are local functions.

	* po.c (po_parse_brief, po_parse_debrief, po_directive_domain,
	po_directive_message, po_comment, po_comment_dot,
	po_comment_filepos): Declare functions as local and add
	prototypes.
	(po_comment_special): New function.
	(po_callback_comment): For special comments call po_comment_special.

	* msgmerge.c (usage): Add --force in help message.
	(merge_methods): Set special comment callback to NULL.

	* po-lex.c (lex_open): Don't set pass_comments to 0.  This has to
	be done in upper layer functions.
	(po_gram_lex): Also pass #! comments up.

	* msgfmt.c (main): Make lexer pass comments up.
	(format_comment_special): New function.  Warns about `#! INEXACT'
	comments.
	(format_methods): Add callback for special comment.

Wed Feb 14 01:56:14 1996  Ulrich Drepper  <drepper@myware>

	* xgettext.c (main): Remove option --output-suffix.  When default
	domain name is "-" write to stdout.

Mon Feb 12 02:20:09 1996  Ulrich Drepper  <drepper@myware>

	* xgettext.c (main): Implement --output-suffix parameter to
	determine alternative form of suffix for output file.

	* xgettext.c, msgjoin.c, msgmerge.c, msgunfmt.c (main): Add
        additional argument to message_list_print call: control output in
        case of empty PO file.
	* message.c (message_list_print): Implement FORCE parameter.
	* message.h: Change prototype.

Sun Jan 21 17:24:56 1996  Ulrich Drepper  <drepper@myware>

	* Makefile.in (install-exec): Include empty else case for case
	when Perl is not available.  Reported by John David Anglin.

Sat Dec 23 12:41:43 1995  Jun Young  <bangjy@nownuri.nowcom.co.kr>

	* gettextp.c (usage): Short option for version info is -V.

Tue Dec 19 22:10:12 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (Makefile, tupdate): Explicitly use $(SHELL) for
        running shell scripts.

Sat Dec  9 17:06:11 1995  Ulrich Drepper  <drepper@myware>

	* xgettext.c, xget-lex.h, xget-lex.c, str-list.h, po.h, po.c,
	po-lex.c, po-hash.y, po-gram.h, open-po.c, msgunfmt.c, msgmerge.c,
	msgjoin.c, msgfmt.c, msgcmp.c, message.h, message.c, gettextp.c:
	Use PARAMS instead of __P.  Suggested by Roland McGrath.

Fri Dec  8 01:38:40 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (PROGRAMS): Add definitions for new msgjoin program.

	* msgjoin.c: Initial revision.

Wed Dec  6 18:43:14 1995  Ulrich Drepper  <drepper@myware>

	* open-po.c (open_po_file): Recognize /dev/stdin as name for
	stdin.  Recognize .pot as valid extension.

Wed Dec  6 18:05:11 1995  Ulrich Drepper  <drepper@myware>

	* msgmerge.c (main): Sort options in getopt loop.

Mon Dec  4 15:37:22 1995  Ulrich Drepper  <drepper@myware>

	* msgmerge.c: (main): Remove unused variable `exit_status'.

Sun Dec  3 02:51:31 1995  Ulrich Drepper  <drepper@myware>

	* xget-lex.h: [xgettext_token_type_ty]: We now have two keyword
	types and also the comma is important.

	* xgettext.c (remember_a_message):
	Correct handling of -c option.  This is not a
	string to prepend to output.  Instead it selects single strings to
	include (instead of all).  Reported by Marcus Daniels.
	(scan_c_file): Extend state machine.  We have to retrieve the second
	argument for the keywords `dgettext' and `dcgetetxt`.

	* xget-lex.c (phase5_get): Recognize ','.
	(xgettext_lex): Pass ',' on caller.
	Return different value for keywords `dgetetxt' and `dcgettext`.

	* xget-lex.c (xgettext_lex): `gettext_noop' is an default keyword.

	* msgunfmt.c (usage):
	Message should not contain TABs.  Reported by Franc,ois Pinard.

	* msgunfmt.c (usage):
	Correct typo: Uniforun -> Uniforum.  Reported by Franc,ois Pinard.

Mon Nov 20 21:12:52 1995  Ulrich Drepper  <drepper@myware>

	* po-lex.c, message.c: Some more pretty printing.

	* message.c (wrap): Don't support '\a' and '\v'.

	* xget-lex.c (phase7_getc): Don't support '\v'.

	* po-lex.c (control_sequence): Don't support '\v'.

	* gettextp.c (expand_escape): Don't support \a and \v.

	* msgcmp.c (compare): Really define static.

Thu Nov 16 22:42:33 1995  Ulrich Drepper  <drepper@myware>

	* msgmerge.c (merge): Remove additional parameter in in prototype.

	* xgettext.c: Reomved unused type definition.  Patch by Peter Miller.

	* xget-lex.c: Correct some comments and better implementation of
	-k option.  Patch by Peter Miller.

	* po.h: Fix typos.  By Peter Miller.

	* po-lex.c (po_gram_lex): Prevent accumulation of #! comments.

	* po-gram.y (comments): Remove unused rule.

	* msgmerge.c: Implement new options sort-by-file and sort-output.
	Patches by Peter Miller.

	* msgcmp.c (domain): Remove unused global variable.
	(domain_directive): Remove unused function.

	* message.h: Fix comment for MESSAGE_DOMAIN_DEFAULT definition.

	* message.c (message_print): Correct typo.
	Clarify comments about ANSI escape sequences.
	Patches by Peter Miller.

	* Makefile.in (DISTFILES): Remove $(COMSRCS).
	(MSGFMT_OBJ): Correct indentation.  Patches by Peter Miller.

Sun Nov 12 12:52:29 1995  Ulrich Drepper  <drepper@myware>

	* xgettext.c (line, string, comment): Remove unused global variables.
	(read_name_from_file): Remove unused variable `cp'.

	* msgmerge.c (merge): Add missing return statement.

	* msgfmt.c (check_pair): Correctly pair comparisons.

	* msgcmp.c (domain_list, mlp): Remove unused global variables.

Sat Nov 11 21:39:17 1995  Ulrich Drepper  <drepper@myware>

	* message.c (message_list_print):
	Prevent output if we have no (real) entry.

	* xgettext.c (remember_a_message): Implement exclude file handling.

Sat Nov 11 17:38:05 1995  Ulrich Drepper  <drepper@myware>

	* msgunfmt.c: Fix message.

	* xgettext.c: Use string handling from str-list and .po file
	handling use xget-lex et.al.

	* xget-lex.h, xget-lex.c, str-list.h, str-list.c, po.h:
	Initial revision.

	* po-lex.h: Allow variable upper limit of errors.
	New prototypes.

	* po-lex.c: Allow variable upper limit of errors.
	Make comment's text available to the caller.

	* po.c, po-hash.y, po-hash.h: Initial revision.

	* po-gram.y: Add handling of comments.

	* po-gram.h: Remove all but one declaration.

	* msgunfmt.c, msgmerge.c: Initial revision.

	* msgfmt.c: Adopt for new interface to parser.

	* msgcmp.c: Move lot's of general code to other files.

	* message.h, message.c:
	Extended functionality for Peter Miller's pseudo-OO programming.

	* Makefile.in: Rewrite after adding rules for new programs.

Fri Nov 10 10:01:37 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (PROGRAMS): Add new programs msgmerge and msgunfmt.

Thu Nov  9 01:29:46 1995  Ulrich Drepper  <drepper@myware>

	* gettextp.c (usage): Split message in two parts.

	* xgettext.c (usage): Split message in three parts.

	* xgettext.c (main):
	Print warning if --files-from option and file names on command
	line are given.

	* xgettext.c (long_options):
	Mixed up `default-domain' and `directory' values.

Wed Nov  8 23:31:34 1995  Ulrich Drepper  <drepper@myware>

	* xgettext.c: Implement -D and -f option.

Tue Nov  7 13:44:44 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (LIBS): One @LIBS@ must be @INTLLIBS@.

	* Makefile.in (LIBS): Correct definition.  We must be prepared to
	use two different libintl.a libraries.
	(po-gram.gen.c): Don't use $< in non-implicit rule.

	* Makefile.in (install-exec): Use `test -n' instead of
	`test XXX != ""'.  Proposed by Franc,ois Pinard.

Sun Nov  5 23:59:03 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (INSTALL_PROGRAM): Do not specify mode.

Sun Nov  5 21:13:57 1995  Ulrich Drepper  <drepper@myware>

	* xgettext.c, msgfmt.c:
	Comments describing what has to be done should start with FIXME.

Sun Nov  5 19:39:56 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (dist-gettext): Make synonym for dist.

Sun Nov  5 18:11:15 1995  Ulrich Drepper  <drepper@myware>

	* po-lex.h (gram_error, gram_error_with_loc):
	Don't define macros when !__STDC__
	even when using gcc.

	* po-lex.c (gram_error, gram_error_with_loc):
	Compile if !__STDC__ even if using gcc.

	* Makefile.in (po-gram.gen.c po-gram.gen.h):
	Remove file prior of generation.

Sun Nov  5 11:39:21 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (dist): Suppress error message when ln failed.
	Get files from $(srcdir) explicitly.

	* xgettext.c (process_c_source):
	Make gettext_noop the forth builtin marker.

Fri Nov  3 00:57:52 1995  Ulrich Drepper  <drepper@myware>

	* msgfmt.c (main): Don't free fname when no suffix was added.

Thu Nov  2 22:55:44 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (dist): Also remove msgcmp.

Tue Oct 31 22:27:52 1995  Ulrich Drepper  <drepper@myware>

	* msgfmt.c: New option --strict: Only if this is given the .mo
	file ending is forced.

	* msgfmt.c (message_directive):
	Call error_with_loc with correct parameters.

	* msgfmt.c (message_directive):
	Ignores empty message does not count as fatal error.

	* Makefile.in (po-gram.gen.c):
	Add g suffix to make multiple substitution in one
	line possible.

Mon Oct 30 22:35:41 1995  Ulrich Drepper  <drepper@myware>

	* po-gram.h:
	Don't give defines for translation of yy* symbols.  This is not enough
	to be able to have more than one parser.  See src/Makefile for the way
	we chose.

	* Makefile.in (po-gram.gen.c):
	Rewrite generated source while copying.  This is the
	only portable way to get more than one parser in the same program.
	Patch by Peter Miller.

Sun Oct 29 10:49:59 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (INSTALL_SCRIPT): New variable.
	(install-exec): Install tupdate using INSTALL_SCRIPT to prevent error
	when using strip flag.

Sat Oct 28 14:39:33 1995  Ulrich Drepper  <drepper@myware>

	* po-gram.h: Include <sys/types.h>.

	* xgettext.c (main):
	Honour -n option even if --omit-header is given.  By Peter Miller.

	* msgcmp.c (check_domain_coverage):
	No double space in message.  By Peter Miller.

	* msgcmp.c (grammar):
	Close input file after coverage check.  Patch by Peter Miller.

Wed Sep 27 20:27:26 1995  Ulrich Drepper  <drepper@myware>

	* msgcmp.c:
	Don't try to include <string.h>.  This is done in "system.h".

	* po-lex.c (gram_error, gram_error_with_loc):
	Add argument definition for K&R style.
	(gram_error, gram_error_with_loc): We increase gram_nerrors,
	not nerrors.  Reported by Francesco Potorti`.

Tue Sep 26 10:03:29 1995  Ulrich Drepper  <drepper@myware>

	* po-gram.h (yyparse): Add redefinition to gram_parse.

	* Makefile.in (YFLAGS):
	Don't use -p option.  Stupid old yaccs do not know it.

	* po-lex.c: Include po-gram.h to get redefinitions of yy* symbols.

	* po-gram.h (yylex, yylval, yyerror):
	Redefine these symbols to gram_* because the
	yacc is now called without -p option.

	* Makefile.in (LIBS):
	Undid last change.  On some systems libintl.a is not
	completely self-contained.  alloca() is miisong e.g. on HP-UX.

Mon Sep 25 22:35:55 1995  Ulrich Drepper  <drepper@myware>

	* msgfmt.c (add_mo_suffix): Fix typo.

	* po-lex.h: Include <sys/types.h>.
	(lex_open): Argument is now `const char *'.

	* msgfmt.c (add_mo_suffix):
	Allow .gmo suffix.  Great idea by Marcus Daniels.

Sat Sep 23 08:20:54 1995  Ulrich Drepper  <drepper@myware>

	* po-gram.y, po-lex.c: Include error.h.

	* open-po.c (open_po_file):
	Remove unused variables `path_dir' and `open_po_file'.

Thu Sep 21 15:30:36 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (LIBS):
	using libnlsut.a twice is not necessary anymore.  libintl.a is
	selfcontained.

	* gettextp.c (main):
	Use dcgettext__ and bindtextdomain__ instead of __dcgettext
	and __bindtextdomain.

	* msgfmt.c, xgettext.c (exit_status):
	New variables.  Contains exit status for the case the program
	ends normally.  Changed when non-fatal error messages are given.

Wed Sep 20 09:16:57 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (xgettext): No also link po-gram.gen.o and po-lex.o.

	* po-lex.c: Pretty print comments.
	Do some CSE in computation of hex value.

	* xgettext.c (read_po_file): Now use the generated scanner.
	(domain_directive, message_directive): New functions needed for
 	scanner.
	(add_id_str): Correct test for exclude files.  The messages in the
 	exclude table are in raw format, not C format.
	(write_out_domain): Check for zero messages and don't write anything in
	this case.

	* po-lex.c (lex_open): Argument NAME is now const.
	(gram_error): Move VARARGS1 comment to right place.
	(control_sequence): Pretty print some comments.

Mon Sep 18 21:23:55 1995  Ulrich Drepper  <drepper@myware>

	* msgfmt.c (add_mo_suffix): Really check for not .mo suffix.

	* xgettext.c (write_out_domain):
	Write file names in #: lines to file, not stdout.

	* po-gram.y (grammar):
	Remove function.  This allows sharing this file in different
	programs.

	* domain.h (msg_domain): Member DOMAIN_NAME is now const.

	* Makefile.in (PROGRAMS): Add msgcmp.
	(HEADERS): Add message.h.
	(SOURCES): Add message.c and msgcmp.c.
	(OBJECTS): Add message.o and msgcmp.o.
	(msgcmp): Rule to construct program.

	* message.h, message.c: Initial revision

	* msgfmt.c (grammar): Close comment so that function is seen.
	(message_directive): MSGID and MSGSTR are not const.

	* msgcmp.c: Initial revision

	* po-gram.h (message_directive):
	MSGID and MSGSTR argument are not const.

	* po-gram.h (grammar): Remove prototype.  Is now locally defined.

	* po-lex.h (gram_error, gram_error_with_loc):
	Protect the instructions by do while (0).

	* msgfmt.c (grammar):
	Define function here.  This allows sharing the grammar file
	with the msgcmp program.

	* msgfmt.c (domain_directive): Free memory of NAME if not needed.
	(new_domain): Do not duplicate filename, use it as it is.

	* msgfmt.c (message_directive):
	Free parameter string memory here if necessary.
	Was done in po-gram.y before.

	* po-gram.h: Remove comment after closing #endif.

	* po-gram.h (grammar): Name parameter in prototype.

Sun Sep 17 23:29:30 1995  Ulrich Drepper  <drepper@myware>

	* xgettext.c (read_po_file): We don't have a search path anymore,
 	so third argument to open_po_file is not needed anymore.  Reduce
 	argument list by this parameter, too.

	* po-lex.c (lex_open):
	We don't have a search path anymore, so third argument to
	ope_po_file is not needed anymore.

	* open-po.c (open_po_file): Remove unused `use_path' parameter.

	* Makefile.in (HEADERS): Add po-gram.h and po-lex.h.

	* po-gram.h, po-lex.h: Initial revision

	* Makefile.in (YACC, YFLAGS): New program used for .po file grammar.
	(SOURCES): Add po-gram.y and po-lex.c.
	(GENHEADERS, GENSOURCES): New variables for generated headers
 	and sources.
	(OBJECTS): Add po-gram.gen.o and po-lex.o.
	Add rules for new files and add to dependency list for msgfmt.

	* po-lex.c, po-gram.y: Initial revision

	* xgettext.c: Remove input path handling.
	Adapt for new hashing functions return values.

	* msgfmt.c:
	Rewrite .po file handling.  Use Peter Millers .po file Yacc grammar.

	* open-po.c: Remove handling of input path.

	* xgettext.c (write_out_domain):
	Split #: lines each 80 columns.  Based on a patch by
	Peter Miller.

	* Makefile.in: hash.[ch] moved from src/ to lib/ subdirectory.

Wed Aug 23 21:13:11 1995  Ulrich Drepper  <drepper@myware>

	* tupdate.in: Don't print comment in front of obsolete entries.

Tue Aug 22 22:16:31 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (AR, RANLIB): Remove definition.  Not needed here.
	Reported by Franc,ois Pinard.

Sat Aug 19 17:38:22 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (install-src):
	Make behave like install.  I.e. really install the catalogs.

Sat Aug 19 00:57:07 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (SCRIPTS):
	New variable.  Contains names of scipts to be generated and
	installed.  For now it is tupdate.
	(PROGRAMS): Remove tupdate.
	(all): Also depend on $(SCRIPTS).

Fri Aug 18 13:02:04 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (PROGRAMS): Add tupdate.
	(tupdate): New rule.  Rebuild tupdate if tupdate.in or
 	../config.status changed.

	* tupdate.in: Correct case where message is new: no really print msgid.
	Better help message by Franc,ois Pinard.
	Recognize #\t as comment.
	Print comment for now obsolete entries.
	Handle real comments (translator comments and tupdate generate obsolete
	entries).

	* gettextp.c (usage): Better help message.
	(usage): Add -s description to help screen.

Mon Aug 14 23:50:48 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (install-src): New no-op goal.

Thu Aug 10 11:26:45 1995  Ulrich Drepper  <drepper@myware>

	* tupdate.in: Don't print two " in front of commented out msgstrs.

Wed Aug  9 09:10:30 1995  Ulrich Drepper  <drepper@myware>

	* hash.c:
	Better implementation.  Rehashing is now much faster because the
 	hashing value stored in the `used' field is reused.
	(insert_entry): Split into two function.  `insert_entry_2' now does the
	the work while in `insert_entry' the checks are done.
	(lookup_2): New function.  Expects the search key to be NUL
 	terminated.  This is the case when the key is already in the
 	hash table when rehashing.

	* msgfmt.c (write_table):
	Third argument to `iterate_table' is now a `const' pointer.

	* hash.h (iterate_table): Third arguemtn is `const' pointer.

	* xgettext.c (struct id_str): Make fields `const' pointers.

Fri Aug  4 22:45:39 1995  Ulrich Drepper  <drepper@myware>

	* msgfmt.c (main): Fix typo: me -> we.

	* msgfmt.c (output_file_open): Remove this unused variable.
	Reported by Jim Meyering.

	* Makefile.in (dist): Remove `copying instead' message.

	* gettextp.c: Start to implement non-Uniforum behaviour.
	Implemented new mode where gettext behaves like `echo',
 	while translating the messages available in the specified test.
	New option: -d, -e, -E, also available in normal mode:
	-E: ignored.
	-e: enable expansion of some escape sequences.
	-d: specify text domain to use.
	New option: -s: enable `echo' mode.

Thu Aug  3 18:25:37 1995  Ulrich Drepper  <drepper@myware>

	* msgfmt.c (usage):
	Fix typo: anormalies -> anomalies.
  	Reported by Karl Anders O/ygard.

Wed Aug  2 18:51:08 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (ID, TAGS): Do not use $^.

	* xgettext.c (write-header): Add `Content-Type' field.

Tue Aug  1 20:07:58 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (distclean): Remove ID file.

	* Makefile.in (TAGS, ID): Use $^ as command argument.
	(TAGS): Give etags -o option t write to current directory,
 	not $(srcdir).
	(ID): Use $(srcdir) instead os $(top_srcdir)/src.

Mon Jul 31 20:57:48 1995  Ulrich Drepper  <drepper@myware>

	* msgfmt.c (process_po_file):
	Quote msgstr in message "empty `msgstr' entry ignored".
	Report by Karl Anders O/ygard.

Sun Jul 30 12:14:29 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (LIBS): Always use ../intl/libintl.a.
	(all): Always depend on ../intl/libintl.a.

Tue Jul 25 00:15:01 1995  Ulrich Drepper  <drepper@myware>

	* msgfmt.c (process_po_file): Correct problem with empty lines.

Sun Jul 23 22:47:56 1995  Ulrich Drepper  <drepper@myware>

	* msgfmt.c (process_po_file):
	Give a message when a sole msgid is found at the end of file.

Wed Jul 19 01:52:13 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (PROGRAMS): Always compile all three programs.

	* gettextp.c: Include libgettext.h explicitly, in addition to
 	libintl.h.  On system having libintl.h provided by the C library
 	this assures to have the prototypes for the function defined in
 	GNU gettext library.
	Use __bindtextdomain and __dgettext instead of bindtextdomain and
 	dgettext resp.
	Swap arguments in bindtextdomain call.

Tue Jul 18 23:57:16 1995  Ulrich Drepper  <drepper@myware>

	* xgettext.c (add_id_str):
	`free(msgstr)' can fail on system not allowing free(0).
	Reported by Francesco Potorti`.

Tue Jul 18 19:43:41 1995  Ulrich Drepper  <drepper@myware>

	* xgettext.c (getpwuid):
 	Define prototype if !defined _POSIX_VERSION.

	* hash.c: Don't include malloc.h and string.h because it will be
 	done in system.h.

	* msgfmt.c: Don't include malloc.h because it will be done in
 	system.h.

Sat Jul 15 00:45:31 1995  Ulrich Drepper  <drepper@myware>

	* xgettext.c (main):
	Disable line_comment option when omit_header is selected.
	(write_out_domain): Don't write empty line if !line_comment.

	* Makefile.in (DISTFILES):
	Due shorted file names now distribute tupdate.in.
	(install, clean): Handle tupdate, not tupdate.perl.

	* tupdate.in: Rename tupdate.perl.in to tupdate.in to fit in 14
 	character file systems.

Thu Jul 13 22:21:22 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (install): Test whether Perl was found before
 	installing.

	* tupdate.perl.in: Make die message more GNU-like.

	* gettextp.c (usage):
	Protect prototypes with __P and use K&R form for parameters.

	* xgettext.c (main):
	Don't use 100u; poor K&R compilers need (unsigned) 100.

	* open-po.c (xstrdup): Protect prototype with __P.

	* msgfmt.c (usage, new_domain, process_po_file, compare_id,
 	write_table, check_pair): Protect prototypes with __P.

	* hash.c (xmalloc): Protect prototype with __P.

Thu Jul 13 01:39:47 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (check): New no-op goal.

Wed Jul 12 10:40:54 1995  Ulrich Drepper  <drepper@myware>

	* tupdate.perl.in: Implement --help and --version options

	* xgettext.c: Add --string-limit option to specify limit on string
 	length.
  	Only warned when verbose mode is selected.
  	Add --verbose option.
  	Help message now correctly says --version == -V.

Tue Jul 11 22:57:54 1995  Ulrich Drepper  <drepper@myware>

	* xgettext.c (usage): Split help string because it breaks 1024
 	byte limit.

	* Makefile.in (install-exec): Install tupdate.

	* xgettext.c (stdlib.h): Protect inclusion by STDC_HEADERS.
	(assert): No assertions anymore.
	(HAVE_STRTOUL): strtoul is now substituted when not available.
	Add warning about too long strings (some systems have limits
 	for strings in their compiler and/or tools).  E.g. Sinix's
 	gencat program.

	* msgfmt.c (printf.h): Include always
	(assert): No assertions anymore (all bugs are gone :-).
	(HAVE_STRTOUL): Not needed anymore because we substitute
 	strtoul if not present.

	* Makefile.in (DISTFILES,distclean): tupdate.perl is now found here.

Tue Jul 11 01:31:03 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in: msgfmt.o depends on ../lib/printf.h.

	* msgfmt.c: protect inclusion of malloc.h and stdlib.h.
  	Don't use GCC's `case b ... e:' feature (NeXT's gcc is
 	gcc-2.xx but does not understand this. Grrr!).

	* open-po.c: Protect inclusion of string.h and stdlib.h.

	* hash.c: Pretty print #define.
	(init_hash, insert_entry): Cast result of calloc.
	(insert_entry): Remove non-ANSI `(type *) var = ...' by
 	`*(type **) &var = ...'.
	(compute_hashval): Cast constant to unsigned long (default: int).
  	Has effects on 64-bit machines.

Tue Jul  4 00:39:58 1995  Ulrich Drepper  <drepper@myware>

	* xgettext.c: Don't write "Version:" field for msgid "".

Mon Jul  3 23:02:04 1995  Ulrich Drepper  <drepper@myware>

	* xgettext.c, msgfmt.c: Better comment.

	* Makefile.in: Pretty print with Franc,ois.
	Fix typo in dependencies.
	Even more dependency corrections.
	Correct dependencies of open-po.c.
	Remove unneeded $(srcdir) from Makefile.in dependency.
	(LIBS): Correct for building in different directory.
	(INCLUDES): Correct for building in different directory.
	(DEFS): Rename DEF_MSG_DOM_DIR to LOCALEDIR.
	(INCLUDE): Don't use -I paths when not needed.

	* hash.c: Include malloc.c and protect string.h inclusion.

	* gettextp.c: Protect include of stdlib.h declare prototype for
 	getenv if not __STDC__.
	Include system.h for EXIT_FAILURE.
	(main, usage): Replace DEF_MSG_DOM_DIR by LOCALEDIR.

	* open-po.c: Include system.h for EXIT_FAILURE.

	* msgfmt.c: Fix typo in !__STDC__ path.
	(process_po_file): Change for new .po file format.

	* xgettext.c (main): Rename DEF_MSG_DOM_DIR to LOCALEDIR.
	Update to new .po file format because Solaris' msgfmt can only
 	handle ANSI C style multi-line strings.

Sun Jul  2 21:31:00 1995  Ulrich Drepper  <drepper@myware>

	* gettextp.c: gettextp.c (usage): Fix typo in help message.
	Reported by Franc,ois Pinard.

Sun Jul  2 02:12:41 1995  Ulrich Drepper  <drepper@myware>

	* First official release.  This directory contains the
	source code for the programs specified in the Uniforum proposal
	for internationalization.
